(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93f31346"],{"471c":function(t,e,a){},"50bd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orderDetail mescroll"},[11!=t.detail.order_status?a("div",{staticClass:"logistics"},[1==t.detail.order_status?a("div",{staticClass:"waitPay"},[a("p",{staticClass:"title"},[t._v("等待买家付款")]),a("p",{staticClass:"text"},[t._v("\n        剩余\n        "),t.hour?a("span",[t._v(t._s(t.addZero(t.hour))+"小时")]):t._e(),t._v("\n        "+t._s(t.addZero(t.min))+"分后自动关闭\n      ")])]):t._e()]):t._e(),a("div",{staticClass:"orderInfo",style:1==t.detail.order_status||11==t.detail.order_status?"padding-bottom:70px;":""},[a("div",{staticClass:"title"},[t._v("订单信息")]),a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-1"},[t._v("订单编号")]),a("div",{staticClass:"flex-2"},[t._v(t._s(t.detail.order_no))])]),a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-1"},[t._v("订单状态")]),a("div",{staticClass:"flex-2",style:1==t.detail.order_status||3==t.detail.order_status?"color:#eb5252":"color:#999"},[t._v(t._s(t.$utils.getText(t.detail.order_status)))])]),a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-1"},[t._v("联系人：")]),a("div",{staticClass:"flex-2"},[t._v(t._s(t.detail.receive_man))])]),a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-1"},[t._v("手机号码")]),a("div",{staticClass:"flex-2"},[t._v(t._s(t.detail.contact_phone))])]),a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-1"},[t._v("核销码：")]),a("div",{staticClass:"flex-2"},[t._v(t._s(t.detail.write_off_code))])]),t.detail.vehicle_brand?a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-1"},[t._v("车辆品牌：")]),a("div",{staticClass:"flex-2"},[t._v(t._s(t.detail.vehicle_brand))])]):t._e(),t.detail.license_plate_number?a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-1"},[t._v("车牌号：")]),a("div",{staticClass:"flex-2"},[t._v(t._s(t.detail.license_plate_number))])]):t._e(),a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-1"},[t._v("下单时间")]),a("div",{staticClass:"flex-2"},[t._v(t._s(t.detail.create_time))])]),1!=t.detail.order_status&&11!=t.detail.order_status?a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-1"},[t._v("支付方式")]),a("div",{staticClass:"flex-2"},[t._v(t._s(1==t.detail.pay_type?"余额":"微信"))])]):t._e(),1!=t.detail.order_status&&11!=t.detail.order_status?a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-1"},[t._v("支付时间")]),a("div",{staticClass:"flex-2"},[t._v(t._s(t.detail.pay_time))])]):t._e()]),1==t.detail.order_status||11==t.detail.order_status?a("div",{staticClass:"bottom"},[a("div",{staticClass:"btns flex"},[1==t.detail.order_status?a("div",{staticClass:"btn btnPay",on:{click:function(e){return t.handle(3)}}},[t._v("去付款")]):t._e(),11==t.detail.order_status?a("div",{staticClass:"btn",on:{click:function(e){return t.handle(5)}}},[t._v("删除订单")]):t._e(),1==t.detail.order_status?a("div",{staticClass:"btn",on:{click:function(e){return t.handle(6)}}},[t._v("取消订单")]):t._e()])]):t._e()])},s=[],d=(a("a481"),a("e17f"),a("2241")),n={data:function(){return{hour:2,min:1,detail:{}}},methods:{handle:function(t){var e=this;switch(t){case 3:d["a"].confirm({title:"提示",message:"是否确定付款？"}).then((function(){e.makePreOrder()})).catch((function(){}));break;case 5:d["a"].confirm({title:"提示",message:"是否确定删除？"}).then((function(){e.delete()})).catch((function(){}));break;case 6:d["a"].confirm({title:"提示",message:"是否确定取消？"}).then((function(){e.cancel()})).catch((function(){}));break;default:console.log(t)}},delete:function(){var t=this,e=this.$toast.loading({duration:0,forbidClick:!0});deleteActivityOrder({token:sessionStorage.getItem("token")||"177128e71cd2d4bc4acdba48bcae04709",activity_order_id:this.detail.id}).then((function(a){e.clear(),0==a.code?(t.$toast("已删除"),setTimeout((function(){t.$router.back()}),500)):t.$toast(a.msg)})).catch((function(e){t.$vux.loading.hide(),console.log(e),t.$vux.toast.show({text:"网络错误",type:"cancel"})}))},cancel:function(){var t=this,e=this.$toast.loading({duration:0,forbidClick:!0});cancelActivityOrder({activity_order_id:this.detail.id}).then((function(a){e.clear(),0==a.code?(t.$toast("已取消"),t.loadData()):t.$toast(a.msg)})).catch((function(e){t.$vux.loading.hide(),console.log(e),t.$vux.toast.show({text:"网络错误",type:"cancel"})}))},makePreOrder:function(){var t=this,e=this.$toast.loading({duration:0,forbidClick:!0});weixinPay({out_trade_no:this.detail.order_no,token:sessionStorage.getItem("token")||"177128e71cd2d4bc4acdba48bcae04709",oauth_openid:sessionStorage.getItem("openId")||"ofDvU6RWRq_iQobXT-vyJx1yJ8Dw"}).then((function(a){e.clear(),0==a.code?a.data.appId?t.weChatPay(a.data.appId,a.data.timeStamp,a.data.nonceStr,a.data.packageValue,a.data.signType,a.data.sign):(t.$toast("支付成功","middle"),t.loadData()):t.$toast(a.msg)})).catch((function(a){e.clear(),console.log(a),t.$toast({text:"网络错误",type:"cancel"})}))},weChatPay:function(t,e,a,i,s,d){console.log(t,e,a,i,s,d);var n=this;function o(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t,timeStamp:e,nonceStr:a,package:i,signType:s,paySign:d},(function(t){console.log(t),"get_brand_wcpay_request:ok"==t.err_msg?(n.$toast("支付成功","middle"),n.loadData()):"get_brand_wcpay_request:cancel"==t.err_msg?n.$toast("取消支付","middle"):"get_brand_wcpay_request:fail"==t.err_msg&&n.$toast("支付失败","middle")}))}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",o,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",o),document.attachEvent("onWeixinJSBridgeReady",o)):o()},addZero:function(t){return t<10?"0"+t:t},countTime:function(){var t=new Date,e=t.getTime(),a=new Date(this.endTime.replace(/-/g,"/")),i=a.getTime(),s=i-e;s>=0&&(this.hour=Math.floor(s/1e3/60/60),this.min=Math.floor(s/1e3/60%60),this.second=Math.floor(s/1e3%60),setTimeout(this.countTime,1e3))},loadData:function(){var t=this,e=this.$toast.loading({duration:0,forbidClick:!0});generateActivityOrderDetail({activity_order_id:this.$route.query.id}).then((function(a){e.clear(),0==a.code&&(t.detail=a.data,1==a.data.order_status&&(t.endTime=a.data.valid_order_time,t.countTime()))}))}},mounted:function(){document.title="订单详情",this.loadData()}},o=n,l=(a("b2e9"),a("2877")),c=Object(l["a"])(o,i,s,!1,null,"0d6a7832",null);e["default"]=c.exports},b2e9:function(t,e,a){"use strict";var i=a("471c"),s=a.n(i);s.a}}]);
//# sourceMappingURL=chunk-93f31346.e028f463.js.map