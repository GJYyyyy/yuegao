(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b0af9f8a"],{"0a49":function(t,e,a){var n=a("9b43"),s=a("626a"),i=a("4bf8"),o=a("9def"),r=a("cd1c");t.exports=function(t,e){var a=1==t,c=2==t,l=3==t,d=4==t,u=6==t,f=5==t||u,b=e||r;return function(e,r,p){for(var h,m,v=i(e),x=s(v),g=n(r,p,3),_=o(x.length),k=0,y=a?b(e,_):c?b(e,0):void 0;_>k;k++)if((f||k in x)&&(h=x[k],m=g(h,k,v),t))if(a)y[k]=m;else if(m)switch(t){case 3:return!0;case 5:return h;case 6:return k;case 2:y.push(h)}else if(d)return!1;return u?-1:l||d?d:y}}},1169:function(t,e,a){var n=a("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"133e":function(t,e,a){"use strict";var n=a("1d94"),s=a.n(n);s.a},"1d94":function(t,e,a){},7514:function(t,e,a){"use strict";var n=a("5ca1"),s=a("0a49")(5),i="find",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),n(n.P+n.F*o,"Array",{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(i)},8427:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-tabs",{on:{change:t._tab_change},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},t._l(t.tabs,(function(t,e){return n("van-tab",{key:e,attrs:{title:t}})})),1),n("ul",{staticStyle:{"background-color":"#fff","border-top":"1px solid #eee"}},[t._m(0),t._l(t.OTCList,(function(e,a){return n("li",{key:a,staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[n("span",{staticClass:"otc-item-field flex-center"},[t._v(t._s(e.userName))]),n("span",{staticClass:"otc-item-field flex-center"},[t._v(t._s(e.otcPrice))]),n("span",{staticClass:"otc-item-field flex-center"},[t._v(t._s(e.createTime))]),n("span",{staticClass:"otc-item-field flex-center"},[n("button",{on:{click:function(a){return t._receive_order(a,e.otcCode)}}},[t._v("接单")])])])}))],2),0===t.OTCList.length?n("p",{staticClass:"flex-center",staticStyle:{"font-size":"12px",color:"#999",height:"30px"}},[t._v("没有数据")]):t._e(),n("button",{staticClass:"flex-center",staticStyle:{position:"fixed","z-index":"10",right:"16px",bottom:"110px",width:"58px",height:"58px","border-radius":"50%","background-color":"#2ba06a",border:"none",color:"#fff",opacity:".8","box-shadow":"1px 1px 3px 3px #ccc"},on:{click:t._open_sell_modal}},[t._v("\n      挂 卖\n  ")]),n("van-popup",{staticStyle:{width:"90%"},attrs:{round:""},model:{value:t.sellModalVisible,callback:function(e){t.sellModalVisible=e},expression:"sellModalVisible"}},[n("p",{staticClass:"flex-center",staticStyle:{height:"60px","font-size":"16px","font-weight":"700"}},[t._v("挂卖")]),n("van-form",{on:{submit:t._submit_sell}},[n("van-field",{attrs:{label:"红包余额",value:t.Hongbao+"元",readonly:""}}),n("van-field",{attrs:{label:"通证余额",value:t.Tongzheng+"元",readonly:""}}),n("van-field",{attrs:{name:"radio",label:"挂卖类型"},scopedSlots:t._u([{key:"input",fn:function(){return[n("van-radio-group",{attrs:{direction:"horizontal"},model:{value:t.sellForm.otcType,callback:function(e){t.$set(t.sellForm,"otcType",e)},expression:"sellForm.otcType"}},[n("van-radio",{attrs:{name:1}},[t._v("红包")]),n("van-radio",{attrs:{name:2}},[t._v("通证")])],1)]},proxy:!0}])}),n("van-field",{attrs:{name:"stepper",label:"挂卖金额",rules:[{require:!0,validator:t._inspect_sell_price_max,message:"挂卖金额不能大于红包余额或通证余额！"}]},scopedSlots:t._u([{key:"input",fn:function(){return[n("van-stepper",{attrs:{step:100,min:100,max:t.sellMaxPrice,"disable-input":""},model:{value:t.sellForm.otcPrice,callback:function(e){t.$set(t.sellForm,"otcPrice",e)},expression:"sellForm.otcPrice"}})]},proxy:!0}])}),n("div",{staticClass:"address",on:{click:function(e){return t.toBankcard()}}},[n("div",{staticClass:"mid"},[t.bankcard.bcCode?n("div",[n("p",{staticClass:"name"},[t._v("\n                              收款账户:"+t._s(t.bankcard.userBcUsername)+"\n                              "),n("span",[t._v(t._s(t.bankcard.userBcNumber))])]),n("p",{staticClass:"addr"},[t._v("账号类型:"+t._s(t.bankcard.bcTypeName))])]):n("div",[n("p",{staticStyle:{color:"#999","font-size":"13px"}},[t._v("请添加收款信息")])])]),n("img",{staticClass:"right",attrs:{src:a("d2b3"),alt:""}})]),n("van-field",{attrs:{label:"支付密码",placeholder:"请输入支付密码",rules:[{required:!0,message:"请输入支付密码"}]},model:{value:t.sellForm.userEnName,callback:function(e){t.$set(t.sellForm,"userEnName",e)},expression:"sellForm.userEnName"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1)],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee"}},[a("span",{staticClass:"otc-item-field flex-center"},[t._v("姓名")]),a("span",{staticClass:"otc-item-field flex-center"},[t._v("金额")]),a("span",{staticClass:"otc-item-field flex-center"},[t._v("时间")]),a("span",{staticClass:"otc-item-field flex-center"},[t._v("操作")])])}],i=(a("7514"),a("365c")),o={data:function(){return{tabs:["红包卖出","红包买入","通证卖出","通证买入"],tabIndex:0,OTCList:[],accountList:[],sellModalVisible:!1,sellForm:{otcType:1,otcBuyorsale:1,otcNumber:1,otcPrice:100,otcMoney:1,userEnName:"",userBccode:""},bankcard:{},bankcardId:""}},computed:{otcType:function(){return 0===this.tabIndex||1===this.tabIndex?1:2===this.tabIndex||3===this.tabIndex?2:void 0},otcSaleorBuy:function(){return 0===this.tabIndex||2===this.tabIndex?1:1===this.tabIndex||3===this.tabIndex?2:void 0},Tongzheng:function(){var t=this.accountList.find((function(t){return"三农通证"===t.ptName}));return t?parseFloat(t.acAmt):0},Hongbao:function(){var t=this.accountList.find((function(t){return"红包钱包"===t.ptName}));return t?parseFloat(t.acAmt):0},sellMaxPrice:function(){var t=100*Math.floor(Math.max(this.Hongbao,this.Tongzheng)/100);return Math.max(t,100)}},mounted:function(){this.getOTCList(),this.getPersonalBalance(),this.getBankcard()},methods:{getPersonalBalance:function(){var t=this;Object(i["bc"])().then((function(e){0==e.code?t.accountList=e.data:t.$toast.fail(e.msg)}))},getOTCList:function(){var t=this,e=this.otcType,a=this.otcSaleorBuy;Object(i["Nb"])({otcType:e,otcSaleorBuy:a,state:0}).then((function(e){0===e.code?t.OTCList=e.data.list:t.$toast.fail(e.msg)}))},_tab_change:function(){this.getOTCList()},_inspect_sell_price_max:function(t){return!(1===this.sellForm.otcType&&t>this.Hongbao)&&!(2===this.sellForm.otcType&&t>this.Tongzheng)},_open_sell_modal:function(){this.sellModalVisible=!0},_submit_sell:function(){var t=this;this.bankcard.bcCode?(this.sellForm.userBccode=this.bankcard.bcCode,Object(i["Xc"])(this.sellForm).then((function(e){0===e.code?(t.$toast.success("挂卖成功！"),t.getOTCList(),t.getPersonalBalance()):t.$toast.fail(e.msg),t.sellModalVisible=!1}))):this.$toast.fail("请选择收款方式")},_receive_order:function(t,e){var a=this;Object(i["Pc"])({otcCode:e}).then((function(t){0===t.code?(a.$toast.success("接单成功！"),a.getOTCList(),a.getPersonalBalance()):a.$toast.fail(t.msg)}))},toBankcard:function(){sessionStorage.setItem("bankcard",this.bankcard),sessionStorage.setItem("bankcardId",this.bankcardId),this.$router.push({name:"myBankcard",query:{type:1}})},getBankcard:function(){var t=this;if(sessionStorage.getItem("bankcard"))this.bankcard=JSON.parse(sessionStorage.getItem("bankcard")),this.bankcardId=sessionStorage.getItem("bankcardId");else{var e=this.$toast.loading({duration:0,forbidClick:!0});Object(i["eb"])({pageNum:1,pageSize:10}).then((function(a){e.clear(),0==a.code?(t.bankcard=a.data.list.length?a.data.list[0]:{},t.bankcardId=a.data.list.length?a.data.list[0].bccode:""):t.$toast.fail(a.msg)}))}}}},r=o,c=(a("133e"),a("2877")),l=Object(c["a"])(r,n,s,!1,null,"cfd09aba",null);e["default"]=l.exports},cd1c:function(t,e,a){var n=a("e853");t.exports=function(t,e){return new(n(t))(e)}},d2b3:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAARCAYAAAF4E7ZwAAAABGdBTUEAALGPC/xhBQAAATBJREFUKBVtUS1PxEAQ7cKmNCEg4f8gOIW7IDDQVFSBIUGdgqBOXXKmX6aCkBpCgkJQg4BfwI9AVGAuQLq8t9ws2wuTtG/nzXsz022QZdlDIJHn+XNQVdWWEKsItSG3xpdS6on4F8YY5bKiKPYCGI4cYw9t22ppM6wsMxbZyM4gV5blAeAV8wwbpljzfin+BRAnPkHrCMpzn6SVcUnSrQnrFPnGqvLTjYdlEYbhjlVA/l3X9aYkfdM04cDrJwreW6x9iO85S9N07hflbFdBm/Wu6yqQx3gmEF+LgOj2ZcLbwe3OgKdIpxBfkB+ISEhg6yuIJ1hl9q8IghEEdzC8RVG0r8VJxKhx3/c3OL5orXeTJPkgb0UoxiiWeB5xS9txHC9YlOC/fkexBRFh0S8p+PgDhsaFvu3zwYgAAAAASUVORK5CYII="},e853:function(t,e,a){var n=a("d3f4"),s=a("1169"),i=a("2b4c")("species");t.exports=function(t){var e;return s(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!s(e.prototype)||(e=void 0),n(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-b0af9f8a.9894970d.js.map