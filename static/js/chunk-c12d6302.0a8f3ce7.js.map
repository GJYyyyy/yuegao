{"version":3,"sources":["webpack:///./src/views/Author.vue?8406","webpack:///./src/views/Author.vue?e7d3","webpack:///src/views/Author.vue","webpack:///./src/views/Author.vue?5e48","webpack:///./src/views/Author.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticRenderFns","data","methods","login","console","log","url","urlArr","i","length","urlObj","split","sessionStorage","getItem","toRouter","urlTo","$utils","Deserialize","code","$toast","allowMultiple","duration","forbidClick","loginType","parentCode","parentId","window","location","href","removeItem","$config","http","mounted","component"],"mappings":"kHAAA,yBAAgiB,EAAG,G,gECAniB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,oBAClHC,EAAkB,G,wBCMtB,GACEC,KADF,WAEI,MAAO,IAETC,QAAS,CACPC,MADJ,WACA,WACA,oCACA,kCACA,8BACA,8BACA,OACMC,QAAQC,IAAI,QAASC,GAKrBF,QAAQC,IAAI,QAASC,GACrB,IAAN,2BACA,wCACA,KACMF,QAAQC,IAAIE,GACZ,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAOE,OAAQD,IACjCE,EAAOH,EAAOC,GAAGG,MAAM,KAAK,IAAMJ,EAAOC,GAAGG,MAAM,KAAK,GAGzD,GADAP,QAAQC,IAAIK,GACRE,eAAeC,QAAQ,SACzBnB,KAAKoB,SAASR,EAAKI,EAAQK,QAG7B,GAAIrB,KAAKsB,OAAOC,cAAcC,KAAM,CAGlCxB,KAAKyB,OAAOC,gBACZ,IAAR,uBACUC,SAAU,EACVC,aAAa,IAGf,OAAR,QAAQ,CAAR,CACUJ,KAAMxB,KAAKsB,OAAOC,cAAcC,KAChCK,UAAW,IACXC,WAAYd,EAAOe,UAAY,KAEzC,kBACU,QAAV,OACU,EAAV,QACA,WACY,eAAZ,8BACY,eAAZ,kCACY,eAAZ,oCACY,eAAZ,oCACY,eAAZ,QACA,aACA,qCAEY,eAAZ,oCACY,eAAZ,0CACY,eAAZ,8CACY,EAAZ,iBAEY,EAAZ,2BAGA,mBACU,EAAV,QACU,QAAV,eAGQC,OAAOC,SAASC,KACxB,6DACA,qBACA,iBACA,+CACA,uEAGId,SAxEJ,SAwEA,OACMF,eAAeiB,WAAW,OAC1BjB,eAAeiB,WAAW,YAEhC,iCACA,6CAOA,qCACA,2CAKMH,OAAOC,SAASC,KAAOtB,EAHrBoB,OAAOC,SAASC,KAAOlC,KAAKoC,QAAQC,KAAO,wBAR3CL,OAAOC,SAASC,KACxB,uDAaEI,QAjGF,WAkGItC,KAAKS,UCzGuU,I,wBCQ5U8B,EAAY,eACd,EACAzC,EACAQ,GACA,EACA,KACA,WACA,MAIa,aAAAiC,E","file":"static/js/chunk-c12d6302.0a8f3ce7.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Author.vue?vue&type=style&index=0&id=a7a5cde0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Author.vue?vue&type=style&index=0&id=a7a5cde0&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"author imgWrap\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"author imgWrap\">\r\n    <!-- <img src=\"@/assets/img/author.jpg\" alt /> -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { weixinLogin2, createCommission } from \"@/api\";\r\nexport default {\r\n  data() {\r\n    return {};\r\n  },\r\n  methods: {\r\n    login() {\r\n      let url = sessionStorage.getItem(\"fromUrl\")\r\n        ? sessionStorage.getItem(\"fromUrl\")\r\n        : sessionStorage.getItem(\"url\")\r\n          ? sessionStorage.getItem(\"url\")\r\n          : \"/wx/\";\r\n      console.log(\"跳转的地址\", url);\r\n      // if (url.indexOf(\"?from=\") != -1) {\r\n      //   let reg = url.substring(url.indexOf(\"?from=\"), url.indexOf(\"#\"));\r\n      //   url.replace(reg, \"\");\r\n      // }\r\n      console.log(\"跳转的地址\", url);\r\n      let urlTo = url.substr(url.indexOf(\"?\"));\r\n      let urlArr = url.substr(url.indexOf(\"?\") + 1).split(\"&\");\r\n      let urlObj = {};\r\n      console.log(urlArr);\r\n      for (var i = 0; i < urlArr.length; i++) {\r\n        urlObj[urlArr[i].split(\"=\")[0]] = urlArr[i].split(\"=\")[1];\r\n      }\r\n      console.log(urlObj);\r\n      if (sessionStorage.getItem(\"token\")) {\r\n        this.toRouter(url, urlObj, urlTo);\r\n        return;\r\n      }\r\n      if (this.$utils.Deserialize().code) {\r\n        //认证完成之后调回本页面\r\n\r\n        this.$toast.allowMultiple();\r\n        const loading = this.$toast.loading({\r\n          duration: 0, // 持续展示 toast\r\n          forbidClick: true, // 禁用背景点击\r\n        });\r\n        // sessionStorage.removeItem(\"url\");\r\n        weixinLogin2({\r\n          code: this.$utils.Deserialize().code,\r\n          loginType: \"1\",\r\n          parentCode: urlObj.parentId || \"\",\r\n        })\r\n          .then(res => {\r\n            console.log(res);\r\n            loading.clear();\r\n            if (res.code == 0) {\r\n              sessionStorage.setItem(\"token\", res.data.token);\r\n              sessionStorage.setItem(\"userId\", res.data.userCode);\r\n              sessionStorage.setItem(\"userShop\", res.data.userShop);\r\n              sessionStorage.setItem(\"shopCode\", res.data.shopCode);\r\n              sessionStorage.setItem(\r\n                \"headimgurl\",\r\n                this.$utils.dealImg(res.data.userHeader)\r\n              );\r\n              sessionStorage.setItem(\"userName\", res.data.userName);\r\n              sessionStorage.setItem(\"userName2\", res.data.userName2 || \"\");\r\n              sessionStorage.setItem(\"userMobile2\", res.data.userMobile2 || \"\");\r\n              this.toRouter(url, urlObj, urlTo);\r\n            } else {\r\n              this.$toast.fail(res.errorMsg);\r\n            }\r\n          })\r\n          .catch(err => {\r\n            loading.clear();\r\n            console.log(err);\r\n          });\r\n      } else {\r\n        window.location.href =\r\n          \"https://open.weixin.qq.com/connect/oauth2/authorize?appid=\" +\r\n          this.$config.wxAppid +\r\n          \"&redirect_uri=\" +\r\n          encodeURIComponent(this.$config.wxRedirectUri) +\r\n          \"&response_type=code&scope=snsapi_userinfo&state=123#wechat_redirect\";\r\n      }\r\n    },\r\n    toRouter(url, urlObj, urlTo) {\r\n      sessionStorage.removeItem(\"url\");\r\n      sessionStorage.removeItem(\"fromUrl\");\r\n      if (\r\n        url.indexOf(\"merchantsCenter\") != -1 &&\r\n        sessionStorage.getItem(\"userShop\") == \"false\"\r\n      ) {\r\n        window.location.href =\r\n          this.$config.http + \"/wx/#/merchantsManagement?type=1\";\r\n        return;\r\n      }\r\n      if (\r\n        url.indexOf(\"merchantsManagement\") != -1 &&\r\n        sessionStorage.getItem(\"userShop\") == \"true\"\r\n      ) {\r\n        window.location.href = this.$config.http + \"/wx/#/merchantsCenter\";\r\n        return;\r\n      }\r\n      window.location.href = url;//this.$config.http + url;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.login();\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.author {\r\n  img {\r\n    width: 100vw;\r\n    height: 100vh;\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Author.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Author.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Author.vue?vue&type=template&id=a7a5cde0&scoped=true&\"\nimport script from \"./Author.vue?vue&type=script&lang=js&\"\nexport * from \"./Author.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Author.vue?vue&type=style&index=0&id=a7a5cde0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a7a5cde0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}