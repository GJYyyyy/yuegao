(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c12132f"],{"29aa":function(e,t,a){e.exports=a.p+"static/img/edit.6f718fb8.png"},"2a35":function(e,t,a){},"3daa":function(e,t,a){"use strict";var i=a("ce6b"),n=a.n(i);n.a},"49b2":function(e,t,a){"use strict";a.r(t);var i,n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"addActivity mescroll"},[i("div",{staticClass:"mid"},[i("div",{staticClass:"headPic"},[i("img",{staticClass:"pic",attrs:{src:e.detail.aimg?e.$utils.dealImg(e.detail.aimg):a("164d"),alt:""}}),i("img",{staticClass:"icon",attrs:{src:a("29aa"),alt:""},on:{click:function(t){return e.upload("1")}}}),i("input",{ref:"upload1",staticClass:"file",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.chooseUpload}})]),i("van-cell-group",[i("van-field",{attrs:{"input-align":"right",clearable:"",label:"活动名称",placeholder:"请输入活动名称，便于自己管理"},on:{blur:function(t){return e.blur()}},model:{value:e.detail.aname,callback:function(t){e.$set(e.detail,"aname",t)},expression:"detail.aname"}}),i("van-field",{attrs:{"input-align":"right",clearable:"",label:"活动标题",placeholder:"展示给用户看的活动标题内容"},on:{blur:function(t){return e.blur()}},model:{value:e.detail.viewName,callback:function(t){e.$set(e.detail,"viewName",t)},expression:"detail.viewName"}}),i("van-field",{attrs:{"input-align":"right",clearable:"",label:"活动副标题",placeholder:"展示给用户看的副标题内容"},on:{blur:function(t){return e.blur()}},model:{value:e.detail.viewName2,callback:function(t){e.$set(e.detail,"viewName2",t)},expression:"detail.viewName2"}}),i("van-field",{attrs:{"input-align":"right",clearable:"",label:"配乐",placeholder:"音乐网址，可不填"},on:{blur:function(t){return e.blur()}},model:{value:e.detail.amusic,callback:function(t){e.$set(e.detail,"amusic",t)},expression:"detail.amusic"}}),i("van-field",{attrs:{type:"number","input-align":"right",clearable:"",label:"原价",placeholder:"请输入商品或服务的原价"},on:{blur:function(t){return e.blur()}},model:{value:e.detail.amarketPrice,callback:function(t){e.$set(e.detail,"amarketPrice",t)},expression:"detail.amarketPrice"}}),i("van-field",{attrs:{type:"number","input-align":"right",clearable:"",label:"活动价",placeholder:"请输入本次活动的特价"},on:{blur:function(t){return e.blur()}},model:{value:e.detail.aoutPrice,callback:function(t){e.$set(e.detail,"aoutPrice",t)},expression:"detail.aoutPrice"}}),i("van-field",{attrs:{type:"digit","input-align":"right",clearable:"",label:"总库存",placeholder:"本次活动限购的总数量"},on:{blur:function(t){return e.blur()}},model:{value:e.detail.acounts,callback:function(t){e.$set(e.detail,"acounts",t)},expression:"detail.acounts"}}),i("van-field",{attrs:{type:"number","input-align":"right",clearable:"",label:"一级返佣",placeholder:"用户推荐好友购买后返还的佣金"},on:{blur:function(t){return e.blur()}},model:{value:e.detail.afanh1,callback:function(t){e.$set(e.detail,"afanh1",t)},expression:"detail.afanh1"}}),i("van-field",{attrs:{type:"number","input-align":"right",clearable:"",label:"二级返佣",placeholder:"好友的好友购买后返还用户的佣金"},on:{blur:function(t){return e.blur()}},model:{value:e.detail.afanh2,callback:function(t){e.$set(e.detail,"afanh2",t)},expression:"detail.afanh2"}}),i("van-cell",{attrs:{title:"开始时间","value-class":e.detail.beginDate?"color":"","is-link":"",value:e.detail.beginDate||"活动正式开始的时间"},on:{click:function(t){e.beginDateShow=!0}}}),i("van-cell",{attrs:{title:"结束时间","value-class":e.detail.endDate?"color":"","is-link":"",value:e.detail.endDate||"活动截止时间"},on:{click:function(t){e.endDateShow=!0}}}),i("van-field",{attrs:{"input-align":"right",clearable:"",type:"tel",label:"客服电话",placeholder:"请输入您的客服电话"},on:{blur:function(t){return e.blur()}},model:{value:e.detail.aredTel,callback:function(t){e.$set(e.detail,"aredTel",t)},expression:"detail.aredTel"}}),i("van-field",{attrs:{type:"number","input-align":"right",clearable:"",label:"单个红包最大额",placeholder:"发给用户单个红包的最大金额"},on:{blur:function(t){return e.blur()}},model:{value:e.detail.aredMoneyEvery,callback:function(t){e.$set(e.detail,"aredMoneyEvery",t)},expression:"detail.aredMoneyEvery"}}),i("van-field",{attrs:{type:"number","input-align":"right",clearable:"",label:"红包最大额",placeholder:"发送红包总金额最大值"},on:{blur:function(t){return e.blur()}},model:{value:e.detail.aredMoneyMax,callback:function(t){e.$set(e.detail,"aredMoneyMax",t)},expression:"detail.aredMoneyMax"}}),i("div",[i("van-cell",{on:{click:function(t){return e.upload("2")}}},[i("template",{slot:"title"},[i("span",{staticClass:"custom-text"},[e._v("详细介绍")])]),i("div",{staticClass:"content"},[i("p",[e._v("点击上传活动介绍图片")]),i("img",{staticClass:"icon",attrs:{src:a("92e6"),alt:""}}),i("input",{ref:"upload2",staticClass:"file",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.chooseUpload}})])],2),e.picList.length?i("div",{staticClass:"filesList"},e._l(e.picList,(function(t,a){return i("div",{key:a,staticClass:"filesItem"},[i("img",{attrs:{src:e.$utils.dealImg(t),alt:""}}),i("span",{staticClass:"del",on:{click:function(t){return e.delImg(a)}}},[e._v("×")])])})),0):e._e()],1)],1),i("div",{staticClass:"submit-wrap"},[i("div",{staticClass:"submit",on:{click:function(t){return e.submit()}}},[e._v("提交")])])],1),i("van-popup",{attrs:{position:"bottom"},model:{value:e.beginDateShow,callback:function(t){e.beginDateShow=t},expression:"beginDateShow"}},[i("van-datetime-picker",{attrs:{type:"datetime"},on:{confirm:e.beginDateConfirm,cancel:function(t){e.beginDateShow=!1}},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1),i("van-popup",{attrs:{position:"bottom"},model:{value:e.endDateShow,callback:function(t){e.endDateShow=t},expression:"endDateShow"}},[i("van-datetime-picker",{attrs:{type:"datetime"},on:{confirm:e.endDateConfirm,cancel:function(t){e.endDateShow=!1}},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1)},l=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("34ef"),a("4917"),a("28a5"),a("53ca")),s=a("ade3"),r=(a("d1cf"),a("ee83")),c=(a("8a58"),a("e41f")),d=(a("be7f"),a("565f")),u=(a("c194"),a("7744")),f=(a("7f7f"),a("0653"),a("34e9")),h=(a("42df"),a("365c"));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={components:(i={},Object(s["a"])(i,f["a"].name,f["a"]),Object(s["a"])(i,u["a"].name,u["a"]),Object(s["a"])(i,d["a"].name,d["a"]),Object(s["a"])(i,c["a"].name,c["a"]),Object(s["a"])(i,r["a"].name,r["a"]),i),data:function(){return{type:"",detail:{acode:"",aname:"",viewName:"",viewName2:"",aimg:"",amusic:"",amarketPrice:"",aoutPrice:"",acounts:"",afanh1:"",afanh2:"",beginDate:"",endDate:"",aredTel:"",aredMoneyEvery:""},beginDateShow:!1,endDateShow:!1,currentDate:new Date,picList:[]}},methods:{blur:function(){document.body.scrollTop=0},beginDateConfirm:function(e){this.detail.beginDate=this.getValueDate(e),this.beginDateShow=!1},endDateConfirm:function(e){this.detail.endDate=this.getValueDate(e),this.endDateShow=!1},getValueDate:function(e){var t=new Date(e).getFullYear(),a=new Date(e).getMonth()+1,i=new Date(e).getDate(),n=new Date(e).getHours(),l=new Date(e).getMinutes();new Date(e).getSeconds();return t+"-"+(a<10?"0"+a:a)+"-"+(i<10?"0"+i:i)+" "+(n<10?"0"+n:n)+":"+(l<10?"0"+l:l)+":00"},delImg:function(e){this.picList.splice(e,1)},upload:function(e){this.type=e,2==this.type&&this.picList.length>8?this.$toast("最多只能上传9张图片"):this.$refs["upload"+this.type].click()},chooseUpload:function(e){var t=this,a=this,i=(new FormData,e.target.files),n=new FileReader;if(console.log(e),console.log(i.length),!(i.length<1)){this.loading=this.$toast.loading({duration:0,forbidClick:!0,message:"加载中..."});for(var l=function(e){console.log(i[e]);var l=i[e].size/1024/1024;if(l>100)return t.$toast.fail("文件大于100M"),{v:void 0};n.readAsDataURL(i[e]),n.onload=function(){var t=this.result,n=new Image;n.src=t,n.onload=function(){a.compressEvent(n,l,(function(t){a.uploadImg(t,i[e],e,i.length)}))}}},s=0;s<i.length;s++){var r=l(s);if("object"===Object(o["a"])(r))return r.v}}},compressEvent:function(e,t,a){var i=document.createElement("canvas"),n=i.getContext("2d"),l=(e.src.length,e.width),o=e.height;i.width=l,i.height=o,n.drawImage(e,0,0,l,o);var s=i.toDataURL("image/jpeg",t>1?.1:1);a&&a(s)},getPixelRatio:function(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},dataURItoBlob:function(e){var t=e.split(","),a=t[0].match(/:(.*?);/)[1],i=atob(t[1]),n=i.length,l=new Uint8Array(n);while(n--)l[n]=i.charCodeAt(n);return new Blob([l],{type:a})},uploadImg:function(e,t,a,i){var n=this,l=this.dataURItoBlob(e),o=new FormData,s={headers:{"Content-Type":"multipart/form-data"}};o.append("file",l,t.name),o.append("path",1),this.$axios.post(this.$config.host+"/api/common/upload/file",o,s).then((function(e){a+1==i&&n.loading.clear(),console.log(e),0==e.code?"1"==n.type?n.detail.aimg=e.data.filename:n.picList.push(e.data.filename):n.$toast.fail("图片上传失败！")})).catch((function(e){n.$toast.clear(),console.log(e),n.$toast.fail("网络错误")}))},submit:function(){var e=this;if(this.detail.aname)if(this.detail.viewName)if(this.detail.viewName2)if(this.detail.aimg)if(this.detail.amarketPrice)if(this.detail.aoutPrice)if(this.detail.acounts)if(this.detail.afanh1)if(this.detail.afanh2)if(this.detail.beginDate)if(this.detail.endDate)if(new Date(this.detail.beginDate).getTime()>=new Date(this.detail.endDate).getTime())this.$toast("开始时间不能晚于结束时间");else if(this.detail.aredTel)if(this.$utils.isTelno(this.detail.aredTel))if(this.detail.aredMoneyMax)if(this.detail.aredMoneyMax<10)this.$toast("红包最大额不能小于10");else if(this.detail.aredMoneyEvery)if(this.detail.aredMoneyEvery<2)this.$toast("单个红包最大额不能小于2");else{this.detail.amsg=this.picList.join(",");var t=this.$toast.loading({duration:0,forbidClick:!0});Object(h["Sc"])(m({},this.detail)).then((function(a){t.clear(),0==a.code?(e.$toast(e.$route.query.acode?"修改成功":"新增成功"),e.$route.query.acode?setTimeout((function(){e.$router.push({name:"shareActivity",query:{id:a.data}})})):setTimeout((function(){e.$router.push({name:"addResult",query:{id:a.data}})}))):e.$toast(a.msg)}))}else this.$toast("请输入单个红包最大额");else this.$toast("请输入红包最大额");else this.$toast("客服电话格式不正确");else this.$toast("请输入客服电话");else this.$toast("请选择结束时间");else this.$toast("请选择开始时间");else this.$toast("请输入二级返佣");else this.$toast("请输入一级返佣");else this.$toast("请输入总库存");else this.$toast("请输入活动价");else this.$toast("请输入原价");else this.$toast("请上传首图");else this.$toast("请输入活动副标题");else this.$toast("请输入活动标题");else this.$toast("请输入活动名称")},loadData:function(){var e=this,t=this.$toast.loading({duration:0,forbidClick:!0});Object(h["P"])({acode:this.$route.query.acode}).then((function(a){t.clear(),0==a.code?e.detail={acode:a.data.acode,aname:a.data.aname,viewName:a.data.viewName,viewName2:a.data.viewName2,aimg:a.data.aimg,amusic:a.data.amusic,amarketPrice:a.data.amarketPrice,aoutPrice:a.data.aoutPrice,acounts:a.data.acounts,afanh1:a.data.afanh1,afanh2:a.data.afanh2,beginDate:a.data.beginDate,endDate:a.data.endDate,aredTel:a.data.aredTel,aredMoneyMax:a.data.aredMoneyMax,aredMoneyEvery:a.data.aredMoneyEvery}:e.$toast(a.msg)}))}},mounted:function(){document.title="活动",this.$route.query.acode&&this.loadData()}},g=p,v=(a("3daa"),a("c365"),a("2877")),D=Object(v["a"])(g,n,l,!1,null,"55cdf7b0",null);t["default"]=D.exports},"92e6":function(e,t){e.exports="data:image/png;base64,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"},c365:function(e,t,a){"use strict";var i=a("2a35"),n=a.n(i);n.a},ce6b:function(e,t,a){}}]);
//# sourceMappingURL=chunk-3c12132f.4e59c421.js.map