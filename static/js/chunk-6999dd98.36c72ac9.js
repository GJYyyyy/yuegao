(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6999dd98"],{"18b6":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pay"},[a("div",{staticClass:"top"},["1"==e.$route.query.type?a("div",[a("img",{attrs:{src:e.$utils.dealImg(e.detail.shopHeader),alt:""}}),a("p",{staticClass:"text"},[e._v("向"+e._s(e.detail.shopName)+"商家支付")])]):a("div",[a("img",{staticStyle:{"border-radius":"50%"},attrs:{src:e.$utils.dealImg(e.detail.userHeader),alt:""}}),a("p",{staticClass:"text"},[e._v("向"+e._s(e.detail.userName)+"支付")])])]),a("div",{staticClass:"mid"},[a("div",{staticClass:"item flex line"},[a("p",{staticClass:"text"},[e._v("您的佣金余额:")]),a("p",{staticClass:"price"},[e._v(e._s(e.acAmt))])]),a("div",{staticClass:"item line"},[a("p",{staticClass:"text"},[e._v("本次支付总额")]),a("div",{staticClass:"flex marginTop"},[a("p",{staticClass:"font"},[e._v("￥")]),a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.balance,expression:"balance"}],style:e.balance?"color:#333;":"",attrs:{type:"number",placeholder:"0.00"},domProps:{value:e.balance},on:{blur:e.blur,input:function(t){t.target.composing||(e.balance=t.target.value)}}})])])]),a("div",{staticClass:"item line"},[a("div",{staticClass:"flex marginTop"},[a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkcode,expression:"checkcode"}],staticClass:"checkcode",attrs:{type:"number",placeholder:"请输入验证码"},domProps:{value:e.checkcode},on:{blur:e.blur,input:function(t){t.target.composing||(e.checkcode=t.target.value)}}})]),a("div",{staticClass:"btn2",on:{click:e.submitsendcheckcode}},[e._v("获取验证码"),e.min?a("span",[e._v("("+e._s(e.min)+")")]):e._e()])])]),"2"==e.$route.query.type?a("div",{staticClass:"item flex line",on:{click:function(t){e.checked=!e.checked}}},[a("van-checkbox",{staticStyle:{margin:"0 5px 0 0"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),a("p",{staticClass:"text flex-2"},[e._v("佣金余额支付")]),a("p",{staticClass:"price"},[e._v(e._s(e.acAmt))])],1):e._e(),a("div",{staticClass:"btn",on:{click:e.submit}},[e._v("确认支付")])])])},c=[],s=a("ade3"),n=(a("7f7f"),a("3c32"),a("417e")),o=a("365c"),r={components:Object(s["a"])({},n["a"].name,n["a"]),data:function(){return{balance:"",detail:{},acAmt:0,checked:!0,checkcode:"",min:0}},methods:{blur:function(){document.body.scrollTop=0},submitsendcheckcode:function(){var e=this;if(!this.min){this.$toast.allowMultiple();var t=this.$toast.loading({duration:0,forbidClick:!0});Object(o["Fc"])().then((function(a){t.clear(),0==a.code?(e.$toast("验证码发送成功，请在您的手机短信中查看验证码"),e.min=60,e.Interval=setInterval((function(){e.min--,e.min<1&&clearInterval(e.Interval)}),1e3)):e.$toast(a.msg)}))}},submit:function(){var e=this;if(this.balance)if("2"==this.$route.query.type&&this.balance>this.acAmt)this.$toast("余额不足");else if(this.checkcode){var t=this.$toast.loading({duration:0,forbidClick:!0});"1"==this.$route.query.type?Object(o["k"])({shopCode:this.$route.query.shopCode,moneyNum:parseInt(100*this.balance),payType:this.checked?"2":"1",checkcode:this.checkcode}).then((function(a){t.clear(),0==a.code?a.data.appId?e.weChatPay(a.data.appId,a.data.timeStamp,a.data.nonceStr,a.data.package,a.data.signType,a.data.paySign):e.$router.push({name:"payDetail",query:{balance:e.balance,result:a.data.return?"1":"2",shopName:e.detail.shopName,type:"1"}}):e.$toast(a.msg)})):Object(o["rc"])({userCode:this.$route.query.userCode,moneyNum:parseInt(100*this.balance),checkcode:this.checkcode}).then((function(a){t.clear(),0==a.code?e.$router.push({name:"payDetail",query:{balance:e.balance,result:a.data.return?"1":"2",userName:e.detail.userName,type:"2"}}):e.$toast(a.msg)}))}else this.$toast("请输入短信验证码");else this.$toast("请输入佣金金额")},weChatPay:function(e,t,a,i,c,s){var n=this;function o(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e,timeStamp:t,nonceStr:a,package:i,signType:c,paySign:s},(function(e){console.log(e),"get_brand_wcpay_request:ok"==e.err_msg?(n.$toast("支付成功","middle"),setTimeout((function(){n.$router.push({name:"payDetail",query:{balance:n.balance,result:"1",shopName:n.detail.shopName,type:"1"}})}),500)):"get_brand_wcpay_request:cancel"==e.err_msg?n.$toast("支付取消","middle"):"get_brand_wcpay_request:fail"==e.err_msg&&n.$toast("支付失败，请稍后再试","middle")}))}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",o,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",o),document.attachEvent("onWeixinJSBridgeReady",o)):o()},loadData:function(){var e=this,t=this.$toast.loading({duration:0,forbidClick:!0});"1"==this.$route.query.type?Object(o["bb"])({shopCode:this.$route.query.shopCode}).then((function(a){t.clear(),0==a.code?(e.detail=a.data,e.acAmt=a.data.myAccount[0].acAmt):e.$toast(a.msg)})):Object(o["Rb"])({userCode:this.$route.query.userCode}).then((function(a){t.clear(),0==a.code?(e.detail=a.data,e.acAmt=a.data.myAccount[2].acAmt):e.$toast(a.msg)}))}},mounted:function(){document.title="付款",this.loadData()}},d=r,l=(a("5304"),a("2877")),u=Object(l["a"])(d,i,c,!1,null,"2c186dc2",null);t["default"]=u.exports},2381:function(e,t,a){},"3c32":function(e,t,a){"use strict";a("68ef"),a("9d70"),a("3743"),a("2381")},"417e":function(e,t,a){"use strict";var i=a("d282"),c=a("0a26"),s=Object(i["a"])("checkbox"),n=s[0],o=s[1];t["a"]=n({mixins:[Object(c["a"])({bem:o,role:"checkbox",parent:"vanCheckbox"})],computed:{checked:{get:function(){return this.parent?-1!==this.parent.value.indexOf(this.name):this.value},set:function(e){this.parent?this.setParentValue(e):this.$emit("input",e)}}},watch:{value:function(e){this.$emit("change",e)}},methods:{toggle:function(e){var t=this;void 0===e&&(e=!this.checked),clearTimeout(this.toggleTask),this.toggleTask=setTimeout((function(){t.checked=e}))},setParentValue:function(e){var t=this.parent,a=t.value.slice();if(e){if(t.max&&a.length>=t.max)return;-1===a.indexOf(this.name)&&(a.push(this.name),t.$emit("input",a))}else{var i=a.indexOf(this.name);-1!==i&&(a.splice(i,1),t.$emit("input",a))}}}})},5304:function(e,t,a){"use strict";var i=a("7b14"),c=a.n(i);c.a},"7b14":function(e,t,a){}}]);
//# sourceMappingURL=chunk-6999dd98.36c72ac9.js.map