{"version":3,"sources":["webpack:///./src/views/beautySalonMall/myLogin.vue?a9bf","webpack:///./src/assets/img/icon/logo@3x.png","webpack:///./src/views/beautySalonMall/myLogin.vue?9a55","webpack:///src/views/beautySalonMall/myLogin.vue","webpack:///./src/views/beautySalonMall/myLogin.vue?6cb0","webpack:///./src/views/beautySalonMall/myLogin.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticStyle","_m","staticClass","directives","name","rawName","value","expression","attrs","domProps","on","$event","target","composing","userName","password","_login","_v","staticRenderFns","data","isBtnLoading","created","checkLogin","computed","btnText","mounted","document","title","methods","sessionStorage","setItem","console","res","code","userId","userShop","shopCode","userName2","userMobile2","account_number","isCookie","openid","localStorage","token","$toast","fail","component"],"mappings":"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","file":"static/js/chunk-6874bd6b.5c7373ce.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myLogin.vue?vue&type=style&index=0&id=cb415dfe&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myLogin.vue?vue&type=style&index=0&id=cb415dfe&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"static/img/logo@3x.6a3d0a7a.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"padding-top\":\"120px\"}},[_vm._m(0),_c('div',{staticClass:\"login_form\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userName),expression:\"userName\"}],staticClass:\"qxs-ic_user qxs-icon\",attrs:{\"type\":\"text\",\"placeholder\":\"用户名\"},domProps:{\"value\":(_vm.userName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.userName=$event.target.value}}}),_c('span',{staticClass:\"mang\"},[_c('van-icon',{attrs:{\"name\":\"manager\",\"color\":\"white\"}})],1),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],staticClass:\"qxs-ic_password qxs-icon\",attrs:{\"type\":\"text\",\"placeholder\":\"密码\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_c('span',{staticClass:\"mang1\"},[_c('van-icon',{attrs:{\"name\":\"bell\",\"color\":\"white\"}})],1)]),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('van-button',{attrs:{\"plain\":\"\",\"hairline\":\"\",\"color\":\"#253238\",\"round\":\"\"},on:{\"click\":_vm._login}},[_vm._v(\"登录\")])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"outer_label\"},[_c('img',{staticClass:\"inner_label login_logo\",attrs:{\"src\":require(\"../../assets/img/icon/logo@3x.png\")}})])}]\n\nexport { render, staticRenderFns }","\r\n<template>\r\n  <div style=\"padding-top:120px;\">\r\n    <div class=\"outer_label\">\r\n      <img\r\n        class=\"inner_label login_logo\"\r\n        src=\"../../assets/img/icon/logo@3x.png\"\r\n      />\r\n    </div>\r\n    <div class=\"login_form\">\r\n      <input\r\n        type=\"text\"\r\n        class=\"qxs-ic_user qxs-icon\"\r\n        placeholder=\"用户名\"\r\n        v-model=\"userName\"\r\n      />\r\n      <span class=\"mang\"><van-icon name=\"manager\" color=\"white\" /></span>\r\n      <input\r\n        type=\"text\"\r\n        class=\"qxs-ic_password qxs-icon\"\r\n        placeholder=\"密码\"\r\n        v-model=\"password\"\r\n      />\r\n      <span class=\"mang1\"><van-icon name=\"bell\" color=\"white\" /></span>\r\n    </div>\r\n\r\n    <div style=\"text-align:center\">\r\n    <van-button plain hairline color=\"#253238\" @click=\"_login\" round >登录</van-button >\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { login, getPersonalInfo } from '@/api';\r\nexport default {\r\n  name: \"\",\r\n  data() {\r\n    return {\r\n      userName: \"\",\r\n      password: \"\",\r\n      isBtnLoading: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.checkLogin();\r\n  },\r\n  computed: {\r\n    btnText() {\r\n      if (this.isBtnLoading) return \"登录中...\";\r\n      return \"登录\";\r\n    },\r\n  },\r\n  mounted(){\r\n    document.title = '登录';\r\n  },\r\n  methods: {\r\n\r\n    /**\r\n     * 检查登录状态\r\n     * 如果登录状态有效，则返回上一个页面\r\n     */\r\n    checkLogin(){\r\n      // if(sessionStorage.getItem('token')) this.$router.push('/');\r\n      let token = sessionStorage.getItem('token') || localStorage.getItem('token');\r\n      if(token){\r\n        sessionStorage.setItem('token',token);\r\nconsole.log('登录页获取到的token:',token);\r\n        getPersonalInfo().then(res=>{\r\nconsole.log('登录页获取到的用户信息:',res);\r\n          if (res.code == 0) {\r\n            sessionStorage.setItem(\"userId\", res.data.userId);\r\n            sessionStorage.setItem(\"userShop\", res.data.userShop);\r\n            sessionStorage.setItem(\"shopCode\", res.data.shopCode);\r\n            sessionStorage.setItem(\r\n              \"headimgurl\",\r\n              this.$utils.dealImg(res.data.userHeader)\r\n            );\r\n            sessionStorage.setItem(\"userName\", res.data.userName);\r\n            sessionStorage.setItem(\"userName2\", res.data.userName2 || \"\");\r\n            sessionStorage.setItem(\"userMobile2\", res.data.userMobile2 || \"\");\r\n\r\n            let hash = sessionStorage.getItem('hash') || '/';\r\n            this.$router.push(hash);\r\n          }\r\n        })\r\n        \r\n      }\r\n    },\r\n    _login() {\r\n      if (!this.userName) {\r\n        this.$toast.fail(\"请输入用户名\");\r\n        return;\r\n      }\r\n      if (!this.password) {\r\n        this.$toast.fail(\"请输入密码\");\r\n        return;\r\n      }\r\n\r\n      login({\r\n        account_number: this.userName,\r\n        code: this.password,\r\n        isCookie: true,\r\n        openid: ''\r\n      }).then(res=>{\r\n        if(res.code === 0){\r\n\r\n          localStorage.setItem('token',res.data.token);\r\n          sessionStorage.setItem(\"token\", res.data.token);\r\n          sessionStorage.setItem(\"userId\", res.data.userId);\r\n          sessionStorage.setItem(\"userShop\", res.data.userShop);\r\n          sessionStorage.setItem(\"shopCode\", res.data.shopCode);\r\n          sessionStorage.setItem(\r\n            \"headimgurl\",\r\n            this.$utils.dealImg(res.data.userHeader)\r\n          );\r\n          sessionStorage.setItem(\"userName\", res.data.userName);\r\n          sessionStorage.setItem(\"userName2\", res.data.userName2 || \"\");\r\n          sessionStorage.setItem(\"userMobile2\", res.data.userMobile2 || \"\");\r\n\r\n          this.$router.push('/');\r\n          this.$toast.success(res.msg);\r\n        }else{\r\n          this.$toast.fail(res.msg);\r\n        }\r\n      })\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.mang{\r\n  position: absolute;\r\n  left: 50px;\r\n  top: 20px;\r\n}\r\n.mang1{\r\n  position: absolute;\r\n  left: 50px;\r\n  top:65px;\r\n}\r\n.mang2{\r\n  position: absolute;\r\n  left: 14%;\r\n  top:50%;\r\n}\r\n.outer_label {\r\n  text-align: center;\r\n}\r\n.login_form {\r\n  position: relative;\r\n  margin-top: 15px;\r\n}\r\n.qxs-ic_user {\r\n  margin-top: 15px;\r\n  margin-bottom: 5px;\r\n  margin-left: 45px;\r\n  width: 70%;\r\n  height: 24px;\r\n}\r\n.qxs-ic_password {\r\n  margin-top: 15px;\r\n  margin-bottom: 5px;\r\n  margin-left: 45px;\r\n  width: 70%;\r\n  height: 24px;\r\n}\r\n.phonenumber {\r\n  list-style-type: none;\r\n  margin-top: 15px;\r\n  margin-bottom: 5px;\r\n  margin-left: 45px;\r\n}\r\n.flexbox {\r\n  display: flex;\r\n}\r\n.login_form {\r\n  text-align: left;\r\n}\r\n.inputText {\r\n}\r\n.van-button--normal {\r\n  padding: 0 100px;\r\n  margin-top: 20px;\r\n}\r\n.act1 {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 15px;\r\n  height: 20px;\r\n  line-height: 20px;\r\n  color: white;\r\n}\r\n.line {\r\n  margin-left: 5px;\r\n  margin-right: 5px;\r\n}\r\ninput {\r\n  width: 150px;\r\n  height: 40px;\r\n  line-height: 40px;\r\n  margin-bottom: 15px;\r\n  padding: 0 15px;\r\n  background: rgba(0, 0, 0, 0);\r\n  text-indent: 10px;\r\n  padding-left: 20px;\r\n  border: none;\r\n  border-bottom: 0.5px solid #fff;\r\n  font-family: \"Microsoft YaHei\", Helvetica, Arial, sans-serif;\r\n  font-size: 14px;\r\n  color: #fff;\r\n  transition: all .2s;\r\n  -webkit-appearance: none;\r\n  border-radius: 0;\r\n}\r\ninput:focus{\r\n  border: none;\r\n  border-bottom: 1px solid #fff;\r\n}\r\ninput:-moz-placeholder {\r\n  color: #fff\r\n}\r\n\r\ninput:-ms-input-placeholder {\r\n  color: #fff\r\n}\r\n\r\ninput::-webkit-input-placeholder {\r\n  color: #fff\r\n}\r\n\r\ninput:focus {\r\n  outline: 0;\r\n  -moz-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, .1) inset, 0 2px 7px 0 rgba(0, 0, 0, .2);\r\n  -webkit-box-shadow: 0 2px 3px 0 rgba(0, 0, 0, .1) inset, 0 2px 7px 0 rgba(0, 0, 0, .2);\r\n  box-shadow: 0 2px 3px 0 rgba(0, 0, 0, .1) inset, 0 2px 7px 0 rgba(0, 0, 0, .2)\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myLogin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myLogin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./myLogin.vue?vue&type=template&id=cb415dfe&scoped=true&\"\nimport script from \"./myLogin.vue?vue&type=script&lang=js&\"\nexport * from \"./myLogin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./myLogin.vue?vue&type=style&index=0&id=cb415dfe&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cb415dfe\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}