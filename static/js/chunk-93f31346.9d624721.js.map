{"version":3,"sources":["webpack:///./src/views/service/orderDetail.vue?eb08","webpack:///src/views/activity/orderDetail.vue","webpack:///./src/views/service/orderDetail.vue?0853","webpack:///./src/views/service/orderDetail.vue","webpack:///./src/views/service/orderDetail.vue?0694"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","detail","order_status","_v","_s","addZero","hour","_e","min","style","order_no","$utils","getText","receive_man","contact_phone","write_off_code","vehicle_brand","license_plate_number","create_time","pay_type","pay_time","on","$event","handle","staticRenderFns","data","methods","type","title","message","console","log","delete","duration","forbidClick","deleteActivityOrder","token","activity_order_id","id","cancel","cancelActivityOrder","makePreOrder","weixinPay","out_trade_no","oauth_openid","weChatPay","appId","timeStamp","nonceStr","packageValue","signType","sign","$this","onBridgeReady","WeixinJSBridge","invoke","document","addEventListener","attachEvent","val","countTime","leftTime","Math","floor","second","setTimeout","loadData","generateActivityOrderDetail","$route","query","loading","clear","res","code","mounted","component"],"mappings":"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","file":"static/js/chunk-93f31346.9d624721.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"orderDetail mescroll\"},[(_vm.detail.order_status != 11)?_c('div',{staticClass:\"logistics\"},[(_vm.detail.order_status == 1 )?_c('div',{staticClass:\"waitPay\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"等待买家付款\")]),_c('p',{staticClass:\"text\"},[_vm._v(\"\\n        剩余\\n        \"),(_vm.hour)?_c('span',[_vm._v(_vm._s(_vm.addZero(_vm.hour))+\"小时\")]):_vm._e(),_vm._v(\"\\n        \"+_vm._s(_vm.addZero(_vm.min))+\"分后自动关闭\\n      \")])]):_vm._e()]):_vm._e(),_c('div',{staticClass:\"orderInfo\",style:(_vm.detail.order_status  == 1 || _vm.detail.order_status  == 11?'padding-bottom:70px;':'')},[_c('div',{staticClass:\"title\"},[_vm._v(\"订单信息\")]),_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"flex-1\"},[_vm._v(\"订单编号\")]),_c('div',{staticClass:\"flex-2\"},[_vm._v(_vm._s(_vm.detail.order_no))])]),_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"flex-1\"},[_vm._v(\"订单状态\")]),_c('div',{staticClass:\"flex-2\",style:(_vm.detail.order_status == 1 || _vm.detail.order_status == 3?'color:#eb5252':'color:#999')},[_vm._v(_vm._s(_vm.$utils.getText(_vm.detail.order_status)))])]),_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"flex-1\"},[_vm._v(\"联系人：\")]),_c('div',{staticClass:\"flex-2\"},[_vm._v(_vm._s(_vm.detail.receive_man))])]),_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"flex-1\"},[_vm._v(\"手机号码\")]),_c('div',{staticClass:\"flex-2\"},[_vm._v(_vm._s(_vm.detail.contact_phone))])]),_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"flex-1\"},[_vm._v(\"核销码：\")]),_c('div',{staticClass:\"flex-2\"},[_vm._v(_vm._s(_vm.detail.write_off_code))])]),(_vm.detail.vehicle_brand)?_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"flex-1\"},[_vm._v(\"车辆品牌：\")]),_c('div',{staticClass:\"flex-2\"},[_vm._v(_vm._s(_vm.detail.vehicle_brand))])]):_vm._e(),(_vm.detail.license_plate_number)?_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"flex-1\"},[_vm._v(\"车牌号：\")]),_c('div',{staticClass:\"flex-2\"},[_vm._v(_vm._s(_vm.detail.license_plate_number))])]):_vm._e(),_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"flex-1\"},[_vm._v(\"下单时间\")]),_c('div',{staticClass:\"flex-2\"},[_vm._v(_vm._s(_vm.detail.create_time))])]),(_vm.detail.order_status != 1 && _vm.detail.order_status != 11)?_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"flex-1\"},[_vm._v(\"支付方式\")]),_c('div',{staticClass:\"flex-2\"},[_vm._v(_vm._s(_vm.detail.pay_type == 1?'余额':'微信'))])]):_vm._e(),(_vm.detail.order_status != 1 && _vm.detail.order_status != 11)?_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"flex-1\"},[_vm._v(\"支付时间\")]),_c('div',{staticClass:\"flex-2\"},[_vm._v(_vm._s(_vm.detail.pay_time))])]):_vm._e()]),(_vm.detail.order_status  == 1 || _vm.detail.order_status  == 11)?_c('div',{staticClass:\"bottom\"},[_c('div',{staticClass:\"btns flex\"},[(_vm.detail.order_status  == 1)?_c('div',{staticClass:\"btn btnPay\",on:{\"click\":function($event){return _vm.handle(3)}}},[_vm._v(\"去付款\")]):_vm._e(),(_vm.detail.order_status  == 11)?_c('div',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.handle(5)}}},[_vm._v(\"删除订单\")]):_vm._e(),(_vm.detail.order_status  == 1)?_c('div',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.handle(6)}}},[_vm._v(\"取消订单\")]):_vm._e()])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"orderDetail mescroll\">\r\n    <div class=\"logistics\" v-if=\"detail.order_status != 11\">\r\n      <div class=\"waitPay\" v-if=\"detail.order_status == 1 \">\r\n        <p class=\"title\">等待买家付款</p>\r\n        <p class=\"text\">\r\n          剩余\r\n          <span v-if=\"hour\">{{addZero(hour)}}小时</span>\r\n          {{addZero(min)}}分后自动关闭\r\n        </p>\r\n      </div>\r\n    </div>\r\n    <div class=\"orderInfo\" :style=\"detail.order_status  == 1 || detail.order_status  == 11?'padding-bottom:70px;':''\">\r\n      <div class=\"title\">订单信息</div>\r\n      <div class=\"flex\">\r\n        <div class=\"flex-1\">订单编号</div>\r\n        <div class=\"flex-2\">{{detail.order_no}}</div>\r\n      </div>\r\n      <div class=\"flex\">\r\n        <div class=\"flex-1\">订单状态</div>\r\n        <div class=\"flex-2\" :style=\"detail.order_status == 1 || detail.order_status == 3?'color:#eb5252':'color:#999'\">{{$utils.getText(detail.order_status)}}</div>\r\n      </div>\r\n      <div class=\"flex\">\r\n        <div class=\"flex-1\">联系人：</div>\r\n        <div class=\"flex-2\">{{detail.receive_man}}</div>\r\n      </div>\r\n      <div class=\"flex\">\r\n        <div class=\"flex-1\">手机号码</div>\r\n        <div class=\"flex-2\">{{detail.contact_phone}}</div>\r\n      </div>\r\n      <div class=\"flex\">\r\n        <div class=\"flex-1\">核销码：</div>\r\n        <div class=\"flex-2\">{{detail.write_off_code}}</div>\r\n      </div>\r\n      <div class=\"flex\" v-if=\"detail.vehicle_brand\">\r\n        <div class=\"flex-1\">车辆品牌：</div>\r\n        <div class=\"flex-2\">{{detail.vehicle_brand}}</div>\r\n      </div>\r\n      <div class=\"flex\" v-if=\"detail.license_plate_number\">\r\n        <div class=\"flex-1\">车牌号：</div>\r\n        <div class=\"flex-2\">{{detail.license_plate_number}}</div>\r\n      </div>\r\n      <div class=\"flex\">\r\n        <div class=\"flex-1\">下单时间</div>\r\n        <div class=\"flex-2\">{{detail.create_time}}</div>\r\n      </div>\r\n      <div class=\"flex\" v-if=\"detail.order_status != 1 && detail.order_status != 11\">\r\n        <div class=\"flex-1\">支付方式</div>\r\n        <div class=\"flex-2\">{{detail.pay_type == 1?'余额':'微信'}}</div>\r\n      </div>\r\n      <div class=\"flex\" v-if=\"detail.order_status != 1 && detail.order_status != 11\">\r\n        <div class=\"flex-1\">支付时间</div>\r\n        <div class=\"flex-2\">{{detail.pay_time}}</div>\r\n      </div>\r\n    </div>\r\n    <div class=\"bottom\" v-if=\"detail.order_status  == 1 || detail.order_status  == 11\">\r\n      <div class=\"btns flex\">\r\n        <div class=\"btn btnPay\" v-if=\"detail.order_status  == 1\" @click=\"handle(3)\">去付款</div>\r\n        <div class=\"btn\" v-if=\"detail.order_status  == 11\" @click=\"handle(5)\">删除订单</div>\r\n        <div class=\"btn\" v-if=\"detail.order_status  == 1\" @click=\"handle(6)\">取消订单</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Dialog } from \"vant\";\r\n// import {\r\n//   weixinPay,\r\n//   deleteActivityOrder,\r\n//   cancelActivityOrder,\r\n//   generateActivityOrderDetail\r\n// } from \"@/api\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      hour: 2,\r\n      min: 1,\r\n      detail: {}\r\n    };\r\n  },\r\n  methods: {\r\n    handle(type) {\r\n      let that = this;\r\n      switch (type) {\r\n        case 3:\r\n          //去付款\r\n          Dialog.confirm({\r\n            title: \"提示\",\r\n            message: \"是否确定付款？\"\r\n          })\r\n            .then(() => {\r\n              // on confirm\r\n              that.makePreOrder();\r\n            })\r\n            .catch(() => {\r\n              // on cancel\r\n            });\r\n          break;\r\n        case 5:\r\n          //删除订单\r\n          Dialog.confirm({\r\n            title: \"提示\",\r\n            message: \"是否确定删除？\"\r\n          })\r\n            .then(() => {\r\n              // on confirm\r\n              that.delete();\r\n            })\r\n            .catch(() => {\r\n              // on cancel\r\n            });\r\n          break;\r\n        case 6:\r\n          //取消订单\r\n          Dialog.confirm({\r\n            title: \"提示\",\r\n            message: \"是否确定取消？\"\r\n          })\r\n            .then(() => {\r\n              // on confirm\r\n              that.cancel();\r\n            })\r\n            .catch(() => {\r\n              // on cancel\r\n            });\r\n          break;\r\n        default:\r\n          console.log(type);\r\n      }\r\n    },\r\n    delete() {\r\n      const loading = this.$toast.loading({\r\n        duration: 0, // 持续展示 toast\r\n        forbidClick: true // 禁用背景点击\r\n      });\r\n      deleteActivityOrder({\r\n        token:\r\n          sessionStorage.getItem(\"token\") ||\r\n          \"177128e71cd2d4bc4acdba48bcae04709\",\r\n        activity_order_id: this.detail.id\r\n      })\r\n        .then(res => {\r\n          loading.clear();\r\n          if (res.code == 0) {\r\n            this.$toast(\"已删除\");\r\n            setTimeout(() => {\r\n              this.$router.back();\r\n            }, 500);\r\n          } else {\r\n            this.$toast(res.msg);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.$vux.loading.hide();\r\n          console.log(err);\r\n          this.$vux.toast.show({\r\n            text: \"网络错误\",\r\n            type: \"cancel\"\r\n          });\r\n        });\r\n    },\r\n    cancel() {\r\n      const loading = this.$toast.loading({\r\n        duration: 0, // 持续展示 toast\r\n        forbidClick: true // 禁用背景点击\r\n      });\r\n      cancelActivityOrder({\r\n        activity_order_id: this.detail.id\r\n      })\r\n        .then(res => {\r\n          loading.clear();\r\n          if (res.code == 0) {\r\n            this.$toast(\"已取消\");\r\n            this.loadData();\r\n          } else {\r\n            this.$toast(res.msg);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.$vux.loading.hide();\r\n          console.log(err);\r\n          this.$vux.toast.show({\r\n            text: \"网络错误\",\r\n            type: \"cancel\"\r\n          });\r\n        });\r\n    },\r\n    makePreOrder() {\r\n      const loading = this.$toast.loading({\r\n        duration: 0, // 持续展示 toast\r\n        forbidClick: true // 禁用背景点击\r\n      });\r\n      weixinPay({\r\n        out_trade_no: this.detail.order_no,\r\n        token:\r\n          sessionStorage.getItem(\"token\") ||\r\n          \"177128e71cd2d4bc4acdba48bcae04709\",\r\n        oauth_openid:\r\n          sessionStorage.getItem(\"openId\") || \"ofDvU6RWRq_iQobXT-vyJx1yJ8Dw\"\r\n      })\r\n        .then(res => {\r\n          loading.clear();\r\n          if (res.code == 0) {\r\n            if (!res.data.appId) {\r\n              this.$toast(\"支付成功\", \"middle\");\r\n              this.loadData();\r\n              // this.$router.push({\r\n              //   name: \"payResult\",\r\n              //   query: { id: this.detail.id }\r\n              // });\r\n            } else {\r\n              this.weChatPay(\r\n                res.data.appId,\r\n                res.data.timeStamp,\r\n                res.data.nonceStr,\r\n                res.data.packageValue,\r\n                res.data.signType,\r\n                res.data.sign\r\n              );\r\n            }\r\n          } else {\r\n            this.$toast(res.msg);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          loading.clear();\r\n          console.log(err);\r\n          this.$toast({\r\n            text: \"网络错误\",\r\n            type: \"cancel\"\r\n          });\r\n        });\r\n    },\r\n    weChatPay(appId, timeStamp, nonceStr, packageValue, signType, sign) {\r\n      console.log(appId, timeStamp, nonceStr, packageValue, signType, sign);\r\n      var $this = this;\r\n      if (typeof WeixinJSBridge == \"undefined\") {\r\n        if (document.addEventListener) {\r\n          document.addEventListener(\r\n            \"WeixinJSBridgeReady\",\r\n            onBridgeReady,\r\n            false\r\n          );\r\n        } else if (document.attachEvent) {\r\n          document.attachEvent(\"WeixinJSBridgeReady\", onBridgeReady);\r\n          document.attachEvent(\"onWeixinJSBridgeReady\", onBridgeReady);\r\n        }\r\n      } else {\r\n        onBridgeReady();\r\n      }\r\n      function onBridgeReady() {\r\n        WeixinJSBridge.invoke(\r\n          \"getBrandWCPayRequest\",\r\n          {\r\n            appId: appId, //公众号名称，由商户传入\r\n            timeStamp: timeStamp, //时间戳，自1970年以来的秒数\r\n            nonceStr: nonceStr, //随机串\r\n            package: packageValue,\r\n            signType: signType, //微信签名方式：\r\n            paySign: sign //微信签名\r\n          },\r\n          function(res) {\r\n            console.log(res);\r\n            if (res.err_msg == \"get_brand_wcpay_request:ok\") {\r\n              $this.$toast(\"支付成功\", \"middle\");\r\n              $this.loadData();\r\n              // setTimeout(() => {\r\n              //   $this.$router.replace({\r\n              //     name: \"payResult\",\r\n              //     query: { id: $this.detail.id }\r\n              //   });\r\n              // }, 500);\r\n            } else if (res.err_msg == \"get_brand_wcpay_request:cancel\") {\r\n              $this.$toast(\"取消支付\", \"middle\");\r\n            } else if (res.err_msg == \"get_brand_wcpay_request:fail\") {\r\n              $this.$toast(\"支付失败\", \"middle\");\r\n            }\r\n            // 使用以上方式判断前端返回,微信团队郑重提示：res.err_msg将在用户支付成功后返回    ok，但并不保证它绝对可靠。\r\n          }\r\n        );\r\n      }\r\n    },\r\n    addZero(val) {\r\n      return val < 10 ? \"0\" + val : val;\r\n    },\r\n    countTime() {\r\n      // console.log('1')\r\n      //获取当前时间\r\n      let date = new Date();\r\n      let now = date.getTime();\r\n      //设置截止时间\r\n      let endDate = new Date(this.endTime.replace(/-/g, \"/\"));\r\n      let end = endDate.getTime();\r\n      //时间差\r\n      let leftTime = end - now;\r\n      //定义变量 d,h,m,s保存倒计时的时间\r\n      if (leftTime >= 0) {\r\n        // this.day = this.addZero(Math.floor(leftTime/1000/60/60/24));\r\n        this.hour = Math.floor(leftTime / 1000 / 60 / 60);\r\n        this.min = Math.floor((leftTime / 1000 / 60) % 60);\r\n        this.second = Math.floor((leftTime / 1000) % 60);\r\n        setTimeout(this.countTime, 1000);\r\n      }\r\n      //递归每秒调用countTime方法，显示动态时间效果\r\n    },\r\n    loadData() {\r\n      const loading = this.$toast.loading({\r\n        duration: 0, // 持续展示 toast\r\n        forbidClick: true // 禁用背景点击\r\n      });\r\n      generateActivityOrderDetail({\r\n        activity_order_id: this.$route.query.id\r\n      }).then(res => {\r\n        loading.clear();\r\n        if (res.code == 0) {\r\n          this.detail = res.data;\r\n          if (res.data.order_status == 1) {\r\n            this.endTime = res.data.valid_order_time;\r\n            this.countTime();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    document.title = \"订单详情\";\r\n    this.loadData();\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.orderDetail {\r\n  .line {\r\n    height: 5px;\r\n    background: #efefef;\r\n  }\r\n  .line1 {\r\n    border-top: 1pt solid #efefef;\r\n    margin: 20px 0 5px;\r\n  }\r\n  .flex {\r\n    display: flex;\r\n    align-items: center;\r\n    .flex-1 {\r\n      flex: 1;\r\n    }\r\n    .flex-2 {\r\n      flex: 2;\r\n      position: relative;\r\n      height: 100%;\r\n    }\r\n  }\r\n  .logistics {\r\n    .waitPay {\r\n      background: url(\"../../assets/img/pic/dfk.png\") no-repeat;\r\n      background-size: 100% 100%;\r\n      height: 125px;\r\n      padding: 0 0 0 105px;\r\n      color: #fff;\r\n      line-height: 30px;\r\n      overflow: hidden;\r\n      .title {\r\n        margin-top: 30px;\r\n      }\r\n      .text {\r\n        font-size: 13px;\r\n      }\r\n    }\r\n    .flex {\r\n      padding: 15px;\r\n      border-bottom: 1pt solid #efefef;\r\n    }\r\n    .icon {\r\n      width: 20px;\r\n      margin-right: 10px;\r\n    }\r\n    .flex-1 {\r\n      flex: 1;\r\n    }\r\n    .flex-2 {\r\n      flex: 2;\r\n      padding-right: 20px;\r\n      font-size: 15px;\r\n    }\r\n    .text {\r\n      font-size: 16px;\r\n      line-height: 20px;\r\n      text-overflow: -o-ellipsis-lastline;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      display: -webkit-box;\r\n      -webkit-line-clamp: 2;\r\n      line-clamp: 2;\r\n      -webkit-box-orient: vertical;\r\n    }\r\n    .time {\r\n      font-size: 13px;\r\n      color: #999;\r\n      margin-top: 10px;\r\n      line-height: 20px;\r\n    }\r\n    .arrow {\r\n      margin-top: 10px;\r\n    }\r\n  }\r\n  .address {\r\n    padding: 15px;\r\n    .icon {\r\n      width: 20px;\r\n      margin-right: 10px;\r\n    }\r\n\r\n    .flex-1 {\r\n      flex: 1;\r\n    }\r\n    .flex-2 {\r\n      flex: 2;\r\n      font-size: 15px;\r\n    }\r\n\r\n    .personalInfo {\r\n      font-size: 16px;\r\n      line-height: 15px;\r\n      font-weight: bold;\r\n      .name {\r\n        margin-right: 10px;\r\n      }\r\n      .tenlo {\r\n        float: right;\r\n      }\r\n    }\r\n    .addressInfo {\r\n      font-size: 14px;\r\n      color: #999;\r\n      margin-top: 10px;\r\n      line-height: 20px;\r\n      .arrow {\r\n        margin-top: 10px;\r\n      }\r\n    }\r\n  }\r\n  .goodsInfo {\r\n    padding: 0 15px;\r\n    margin-top: 10px;\r\n    .goodsInfo-top {\r\n      align-items: center;\r\n      .title {\r\n        font-size: 18px;\r\n        font-weight: bold;\r\n        line-height: 25px;\r\n      }\r\n      .status {\r\n        font-size: 15px;\r\n        line-height: 25px;\r\n        color: $base-color;\r\n      }\r\n    }\r\n    .list {\r\n      .item {\r\n        height: 120px;\r\n        overflow: hidden;\r\n        margin: 20px 0;\r\n        align-items: flex-start;\r\n        .item-pic {\r\n          margin-right: 10px;\r\n          img {\r\n            width: 100%;\r\n            height: 120px;\r\n          }\r\n        }\r\n        .title {\r\n          font-size: 16px;\r\n          line-height: 25px;\r\n          max-height: 50px;\r\n          text-overflow: -o-ellipsis-lastline;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          display: -webkit-box;\r\n          -webkit-line-clamp: 2;\r\n          line-clamp: 2;\r\n          -webkit-box-orient: vertical;\r\n        }\r\n        .parameter {\r\n          color: #999;\r\n          font-size: 15px;\r\n          line-height: 20px;\r\n          margin: 10px 0;\r\n        }\r\n        .price {\r\n          font-size: 13px;\r\n          font-weight: 600;\r\n          color: #333;\r\n          flex: 2;\r\n          position: absolute;\r\n          width: 100%;\r\n          bottom: 10px;\r\n          .money {\r\n            font-size: 16px;\r\n          }\r\n          .num {\r\n            color: #999;\r\n            margin-left: 10px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .goodsInfo-bottom {\r\n      padding: 10px 0;\r\n      .flex {\r\n        padding: 5px 0;\r\n        line-height: 25px;\r\n        color: #999;\r\n        font-size: 16px;\r\n        display: flex;\r\n        align-items: center;\r\n        .flex-2 {\r\n          text-align: right;\r\n          color: #333;\r\n          flex: 2;\r\n        }\r\n        .flex-1 {\r\n          flex: 1;\r\n        }\r\n      }\r\n      .flex1 {\r\n        padding: 5px 0;\r\n        line-height: 25px;\r\n        color: #999;\r\n        font-size: 16px;\r\n        display: flex;\r\n        .flex-2 {\r\n          text-align: right;\r\n          color: #333;\r\n          flex: 2;\r\n        }\r\n        .flex-1 {\r\n          flex: 1;\r\n        }\r\n      }\r\n      .allPrice {\r\n        text-align: right;\r\n        font-size: 20px;\r\n        font-weight: bold;\r\n        span {\r\n          font-size: 30px;\r\n          font-weight: bold;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .orderInfo {\r\n    padding: 10px 15px 20px;\r\n    .title {\r\n      font-size: 18px;\r\n      font-weight: bold;\r\n      line-height: 25px;\r\n      margin: 0 0 10px;\r\n    }\r\n    .flex {\r\n      line-height: 30px;\r\n      color: #999;\r\n      font-size: 16px;\r\n      display: flex;\r\n      .flex-1 {\r\n        flex: 1;\r\n      }\r\n      .flex-2 {\r\n        text-align: right;\r\n        color: #333;\r\n        flex: 2;\r\n      }\r\n    }\r\n  }\r\n  .bottom {\r\n    position: fixed;\r\n    bottom: 0;\r\n    left: 0;\r\n    height: 50px;\r\n    background: #fff;\r\n    width: 100%;\r\n    box-shadow: 0 -2px 10px 1px rgba(0, 0, 0, 0.1);\r\n    padding: 5px 0;\r\n    .btns {\r\n      padding: 0 15px;\r\n      justify-content: flex-end;\r\n      margin-top: 9px;\r\n      .btn {\r\n        width: 100px;\r\n        color: #666;\r\n        border: 1pt solid #f4f4f4;\r\n        float: right;\r\n        height: 30px;\r\n        line-height: 30px;\r\n        border-radius: 5px;\r\n        font-size: 13px;\r\n        text-align: center;\r\n        margin-left: 10px;\r\n      }\r\n      .btnPay {\r\n        background: $base-color;\r\n        color: #fff;\r\n        border: 1pt solid $base-color;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./orderDetail.vue?vue&type=template&id=0d6a7832&scoped=true&\"\nimport script from \"./orderDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./orderDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./orderDetail.vue?vue&type=style&index=0&id=0d6a7832&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d6a7832\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderDetail.vue?vue&type=style&index=0&id=0d6a7832&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./orderDetail.vue?vue&type=style&index=0&id=0d6a7832&lang=scss&scoped=true&\""],"sourceRoot":""}