(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39a87aa3"],{"86ac":function(e,t,s){"use strict";var a=s("f48b"),o=s.n(a);o.a},"88db":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("ul",{staticStyle:{"background-color":"#fff","border-top":"1px solid #eee"}},[s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("类型")]),s("span",{staticClass:"otc-item-field2"},[s("span",{staticStyle:{color:"#00FF00",display:"inline"}},[e._v(e._s(e.order.otcTypeStr)+" ")])])]),s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("买/卖")]),s("span",{staticClass:"otc-item-field2"},[s("span",{staticStyle:{color:"#FF0000",display:"block",clear:"both"}},[e._v("【"+e._s(e.order.otcSaleorBuyStr)+"】")])])]),s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("金额")]),s("span",{staticClass:"otc-item-field2"},[e._v(e._s(e.order.otcPrice))])]),s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("时间")]),s("span",{staticClass:"otc-item-field2"},[e._v(e._s(e.order.createTime))])]),s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("状态")]),s("span",{staticClass:"otc-item-field2"},[e._v(e._s(e.order.stateStr))])]),s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("挂出人")]),s("span",{staticClass:"otc-item-field2"},[e._v(e._s(e.order.userName))])]),s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("电话")]),s("span",{staticClass:"otc-item-field2"},[e._v(e._s(e.order.userMobile))])]),s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("收款信息")]),s("span",{staticClass:"otc-item-field2"},[e._v(e._s(e.order.userBcusername)+" - "+e._s(e.order.userBcnumber)+" - "+e._s(e.order.userBcname))])]),s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("收款码")]),s("span",{staticClass:"otc-item-field2"},[s("img",{staticClass:"pic",attrs:{src:e.order.userBcimg?e.$utils.dealImg(e.order.userBcimg):"",alt:""},on:{click:function(t){e.bcImgVisible=!0}}})])]),s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("说明")]),s("span",{staticClass:"otc-item-field2"},[e._v(e._s(e.order.userDes))])]),s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("接单人")]),s("span",{staticClass:"otc-item-field2"},[e._v(e._s(e.order.userName2))])]),s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("电话")]),s("span",{staticClass:"otc-item-field2"},[e._v(e._s(e.order.userMobile2))])]),s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("说明")]),s("span",{staticClass:"otc-item-field2"},[e._v(e._s(e.order.userDes2))])]),s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[s("span",{staticClass:"otc-item-field flex-center"},[e._v("凭证")]),s("span",{staticClass:"otc-item-field2"},[s("img",{staticClass:"pic",attrs:{src:e.order.userDes2?this.$utils.dealImg(e.order.userDes2):"",alt:""},on:{click:function(t){e.userDes2Visible=!0}}})])]),e._m(0)]),"0"==e.order.otcStatus||"1"==e.order.otcStatus||"2"==e.order.otcStatus||"3"==e.order.otcStatus||"7"==e.order.otcStatus||"8"==e.order.otcStatus||"9"==e.order.otcStatus?s("div",{staticClass:"bottom"},[s("div",{staticClass:"btns flex"},["0"==e.order.otcStatus?s("div",{staticClass:"btn",on:{click:function(t){return e.handle(0)}}},[e._v("撤单")]):e._e(),"1"==e.order.otcStatus&&e.order.userCode2==this.selfUsercode?s("div",{staticClass:"btn",on:{click:function(t){return e.handle(-1)}}},[e._v("取消")]):e._e(),"1"==e.order.otcStatus&&("1"==e.order.otcType&&e.order.userCode2==this.selfUsercode||"2"==e.order.otcType&&e.order.userCode==this.selfUsercode)?s("div",{staticClass:"btn btnPay",on:{click:function(t){return e.handle(1)}}},[e._v("上传付款凭证")]):e._e(),"2"==e.order.otcStatus&&("1"==e.order.otcType&&e.order.userCode2==this.selfUsercode||"2"==e.order.otcType&&e.order.userCode==this.selfUsercode)?s("div",{staticClass:"btn",on:{click:function(t){return e.handle(-2)}}},[e._v("毁约")]):e._e(),"2"==e.order.otcStatus&&("1"==e.order.otcType&&e.order.userCode==this.selfUsercode||"2"==e.order.otcType&&e.order.userCode2==this.selfUsercode)?s("div",{staticClass:"btn btnPay",on:{click:function(t){return e.handle(2)}}},[e._v("转账")]):e._e(),"3"==e.order.otcStatus&&("1"==e.order.otcType&&e.order.userCode2==this.selfUsercode||"2"==e.order.otcType&&e.order.userCode==this.selfUsercode)?s("div",{staticClass:"btn",on:{click:function(t){return e.handle(3)}}},[e._v("确认完成")]):e._e(),"7"!=e.order.otcStatus&&"8"!=e.order.otcStatus&&"9"!=e.order.otcStatus||e.order.userCode!=this.selfUsercode?e._e():s("div",{staticClass:"btn",on:{click:function(t){return e.handle(10)}}},[e._v("重新发布")])])]):e._e(),e.order?e._e():s("p",{staticClass:"flex-center",staticStyle:{"font-size":"12px",color:"#999",height:"30px"}},[e._v("没有数据")]),s("van-popup",{staticStyle:{width:"90%"},attrs:{round:""},model:{value:e.sellModalVisible,callback:function(t){e.sellModalVisible=t},expression:"sellModalVisible"}},[s("p",{staticClass:"flex-center",staticStyle:{height:"60px","font-size":"16px","font-weight":"700"}},[e._v("上传凭证")]),s("van-form",{on:{submit:e._submit_sell}},[s("van-field",{attrs:{label:"凭证上传"},scopedSlots:e._u([{key:"input",fn:function(){return[s("van-uploader",{attrs:{"max-count":"1","after-read":e._read_file_finised},model:{value:e.headerFileList,callback:function(t){e.headerFileList=t},expression:"headerFileList"}})]},proxy:!0}])}),s("div",{staticStyle:{margin:"16px"}},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1)],1)],1),s("van-popup",{staticStyle:{width:"90%"},attrs:{round:""},model:{value:e.bcImgVisible,callback:function(t){e.bcImgVisible=t},expression:"bcImgVisible"}},[s("p",{staticClass:"flex-center",staticStyle:{height:"60px","font-size":"16px","font-weight":"700"}},[e._v("查看付款码")]),s("p",{staticClass:"flex-center",staticStyle:{height:"200px","padding-bottom":"20px"}},[s("img",{staticClass:"pic",attrs:{src:e.order.userBcimg?e.$utils.dealImg(e.order.userBcimg):"",alt:""}})])]),s("van-popup",{staticStyle:{width:"90%"},attrs:{round:""},model:{value:e.userDes2Visible,callback:function(t){e.userDes2Visible=t},expression:"userDes2Visible"}},[s("p",{staticClass:"flex-center",staticStyle:{height:"60px","font-size":"16px","font-weight":"700"}},[e._v("查看付款凭证")]),s("p",{staticClass:"flex-center",staticStyle:{height:"200px","padding-bottom":"20px"}},[s("img",{staticClass:"pic",attrs:{src:e.order.userDes2?e.$utils.dealImg(e.order.userDes2):"",alt:""}})])])],1)},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"flex-between flex-vertical",staticStyle:{"border-bottom":"1px solid #eee",color:"#666"}},[s("span",{staticClass:"otc-item-field flex-center"}),s("span",{staticClass:"otc-item-field2"})])}],i=(s("e17f"),s("2241")),c=s("365c"),r={data:function(){return{order:{},id:"",selfUsercode:"",sellModalVisible:!1,userdes2:"",userBcimg:"",headerFileList:[{url:""}],bcImgVisible:!1,userDes2Visible:!1}},mounted:function(){document.title="OTC订单详情",this.selfUsercode=sessionStorage.getItem("userId")||"",this.loadData()},methods:{loadData:function(){var e=this;Object(c["Pb"])({otcCode:this.$route.query.id}).then((function(t){if(0===t.code){e.order=t.data;var s="";switch(e.order.otcStatus){case"0":s="挂单";break;case"1":s="接单";break;case"2":s="已付款待转账";break;case"3":s="已转账";break;case"4":s="已完成";break;case"7":s="已取消";break;case"8":s="已取消";break;case"9":s="已取消";break;default:s="";break}e.order.stateStr=s;var a="";switch(e.order.otcType){case"1":a="红包";break;case"2":a="通证";break;default:a="红包";break}e.order.otcTypeStr=a;var o="";switch(e.order.otcSaleorBuy){case"1":o="卖";break;case"2":o="买";break;default:o="卖";break}e.order.otcSaleorBuyStr=o,e.headerFileList=[{url:e.order.userDes2?e.$utils.dealImg(e.order.userDes2):""}]}else e.$toast.fail(t.msg)}))},handle:function(e){var t=this;switch(e){case 0:i["a"].confirm({title:"提示",message:"是否确定撤单？"}).then((function(){t.ordercancel()})).catch((function(){}));break;case-1:i["a"].confirm({title:"提示",message:"是否确定取消接单？"}).then((function(){t.ordercancel_get()})).catch((function(){}));break;case-2:i["a"].confirm({title:"提示",message:"是否确定毁约？"}).then((function(){t.ordercancel_pay()})).catch((function(){}));break;case 1:this.sellModalVisible=!0;break;case 2:i["a"].confirm({title:"提示",message:"是否确定转账给对方？"}).then((function(){t.makeOrderPay()})).catch((function(){}));break;case 3:i["a"].confirm({title:"提示",message:"是否确定已完成？"}).then((function(){t.makeOrderComplete()})).catch((function(){}));break;case 10:i["a"].confirm({title:"提示",message:"是否确定重新发布该OTC订单？"}).then((function(){t.repubOtcOrder()})).catch((function(){}));break;default:console.log(e)}},ordercancel:function(){var e=this,t=this.$toast.loading({duration:0,forbidClick:!0});Object(c["Gc"])({id:this.order.otcCode}).then((function(s){t.clear(),0==s.code?(e.$toast("已取消"),e.loadData()):e.$toast(s.msg)})).catch((function(t){e.$vux.loading.hide(),console.log(t),e.$vux.toast.show({text:"网络错误",type:"cancel"})}))},ordercancel_get:function(){var e=this,t=this.$toast.loading({duration:0,forbidClick:!0});Object(c["Hc"])({id:this.order.otcCode}).then((function(s){t.clear(),0==s.code?(e.$toast("已取消"),e.loadData()):e.$toast(s.msg)})).catch((function(t){e.$vux.loading.hide(),console.log(t),e.$vux.toast.show({text:"网络错误",type:"cancel"})}))},ordercancel_pay:function(){var e=this,t=this.$toast.loading({duration:0,forbidClick:!0});Object(c["Ic"])({id:this.order.otcCode}).then((function(s){t.clear(),0==s.code?(e.$toast("已毁约"),e.loadData()):e.$toast(s.msg)})).catch((function(t){e.$vux.loading.hide(),console.log(t),e.$vux.toast.show({text:"网络错误",type:"cancel"})}))},makeOrderPay:function(){var e=this,t=this.$toast.loading({duration:0,forbidClick:!0});Object(c["Dc"])({id:this.order.otcCode}).then((function(s){t.clear(),0==s.code?(e.$toast("已完成转账"),e.loadData()):e.$toast(s.msg)})).catch((function(t){e.$vux.loading.hide(),console.log(t),e.$vux.toast.show({text:"网络错误",type:"cancel"})}))},makeOrderComplete:function(){var e=this,t=this.$toast.loading({duration:0,forbidClick:!0});Object(c["Cc"])({id:this.order.otcCode}).then((function(s){t.clear(),0==s.code?(e.$toast("已确认完成"),e.loadData()):e.$toast(s.msg)})).catch((function(t){e.$vux.loading.hide(),console.log(t),e.$vux.toast.show({text:"网络错误",type:"cancel"})}))},repubOtcOrder:function(){var e=this,t=this.$toast.loading({duration:0,forbidClick:!0});Object(c["Ec"])({id:this.order.otcCode}).then((function(s){t.clear(),0==s.code?(e.$toast("已重新发布。"),e.loadData()):e.$toast(s.msg)})).catch((function(t){e.$vux.loading.hide(),console.log(t),e.$vux.toast.show({text:"网络错误",type:"cancel"})}))},_submit_sell:function(){var e=this,t=this.$toast.loading({duration:0,forbidClick:!0});Object(c["Fc"])({otcCode:this.order.otcCode,userDes2:this.userdes2}).then((function(s){t.clear(),0==s.code?(e.$toast("提交成功，请等待对方确认。"),e.loadData(),e.sellModalVisible=!1):e.$toast(s.msg)})).catch((function(t){e.$vux.loading.hide(),console.log(t),e.$vux.toast.show({text:"网络错误",type:"cancel"})}))},_read_file_finised:function(e){var t=this,s=new FormData,a={headers:{"Content-Type":"multipart/form-data"}};s.append("file",e.file),s.append("path",1),Object(c["hd"])(s,a).then((function(e){0==e.code?t.userdes2=e.data.filename:t.$toast.fail("图片上传失败！")}))}}},l=r,n=(s("86ac"),s("2877")),d=Object(n["a"])(l,a,o,!1,null,"3201f555",null);t["default"]=d.exports},f48b:function(e,t,s){}}]);
//# sourceMappingURL=chunk-39a87aa3.acb9cd12.js.map