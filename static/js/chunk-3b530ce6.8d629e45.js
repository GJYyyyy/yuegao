(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b530ce6"],{"0a49":function(e,t,a){var c=a("9b43"),i=a("626a"),n=a("4bf8"),s=a("9def"),r=a("cd1c");e.exports=function(e,t){var a=1==e,o=2==e,d=3==e,u=4==e,l=6==e,p=5==e||l,h=t||r;return function(t,r,m){for(var f,y,v=n(t),b=i(v),g=c(r,m,3),C=s(b.length),k=0,$=a?h(t,C):o?h(t,0):void 0;C>k;k++)if((p||k in b)&&(f=b[k],y=g(f,k,v),e))if(a)$[k]=y;else if(y)switch(e){case 3:return!0;case 5:return f;case 6:return k;case 2:$.push(f)}else if(u)return!1;return l?-1:d||u?u:$}}},1169:function(e,t,a){var c=a("2d95");e.exports=Array.isArray||function(e){return"Array"==c(e)}},"18b6":function(e,t,a){"use strict";a.r(t);var c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pay"},[a("div",{staticClass:"top"},["1"==e.$route.query.type?a("div",[a("img",{attrs:{src:e.$utils.dealImg(e.detail.shopHeader),alt:""}}),a("p",{staticClass:"text"},[e._v("向"+e._s(e.detail.shopName)+"商家支付")])]):a("div",[a("img",{staticStyle:{"border-radius":"50%"},attrs:{src:e.$utils.dealImg(e.detail.userHeader),alt:""}}),a("p",{staticClass:"text"},[e._v("向"+e._s(e.detail.userName)+"支付")])])]),a("div",{staticClass:"mid"},[a("div",{staticClass:"item flex line"},[a("p",{staticClass:"text"},[e._v("您的红包余额:")]),a("p",{staticClass:"price"},[e._v(e._s(e.acAmt))])]),a("div",{staticClass:"item line"},[a("p",{staticClass:"text"},[e._v("本次红包转账总额")]),a("div",{staticClass:"flex marginTop",staticStyle:{"align-items":"center"}},[a("p",{staticClass:"font"},[e._v("￥")]),a("p",[a("van-stepper",{attrs:{"disable-input":"",min:0,"decimal-length":2,step:"100","input-width":"60px","button-size":"40px"},model:{value:e.balance,callback:function(t){e.balance=t},expression:"balance"}})],1)])]),a("div",{staticClass:"item line"},[a("div",{staticClass:"flex marginTop"},[a("p",{staticStyle:{width:"100%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkcode,expression:"checkcode"}],staticClass:"checkcode",attrs:{type:"number",placeholder:"请输入支付密码"},domProps:{value:e.checkcode},on:{blur:e.blur,input:function(t){t.target.composing||(e.checkcode=t.target.value)}}})])])]),"2"==e.$route.query.type?a("div",{staticClass:"item flex line",on:{click:function(t){e.checked=!e.checked}}},[a("van-checkbox",{staticStyle:{margin:"0 5px 0 0"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),a("p",{staticClass:"text flex-2"},[e._v("红包余额支付")]),a("p",{staticClass:"price"},[e._v(e._s(e.acAmt))])],1):e._e(),a("div",{staticClass:"btn",on:{click:e.submit}},[e._v("确认支付")])])])},i=[],n=(a("7514"),a("ade3")),s=(a("7f7f"),a("3c32"),a("417e")),r=a("365c"),o={components:Object(n["a"])({},s["a"].name,s["a"]),data:function(){return{balance:"",detail:{},acAmt:0,checked:!0,checkcode:""}},methods:{blur:function(){document.body.scrollTop=0},submit:function(){var e=this;if(this.balance)if("2"==this.$route.query.type&&this.balance>this.acAmt)this.$toast("余额不足");else if(this.checkcode){var t=this.$toast.loading({duration:0,forbidClick:!0});"1"==this.$route.query.type?Object(r["l"])({shopCode:this.$route.query.shopCode,moneyNum:parseInt(100*this.balance),payType:this.checked?"2":"1",checkcode:this.checkcode}).then((function(a){t.clear(),0==a.code?a.data.appId?e.weChatPay(a.data.appId,a.data.timeStamp,a.data.nonceStr,a.data.package,a.data.signType,a.data.paySign):e.$router.push({name:"payDetail",query:{balance:e.balance,result:a.data.return?"1":"2",shopName:e.detail.shopName,type:"1"}}):e.$toast(a.msg)})):Object(r["Jc"])({userCode:this.$route.query.userCode,moneyNum:parseInt(100*this.balance),checkcode:this.checkcode}).then((function(a){t.clear(),0==a.code?e.$router.push({name:"payDetail",query:{balance:e.balance,result:a.data.return?"1":"2",userName:e.detail.userName,type:"2"}}):e.$toast(a.msg)}))}else this.$toast("请输入支付密码");else this.$toast("请输入佣金金额")},weChatPay:function(e,t,a,c,i,n){var s=this;function r(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e,timeStamp:t,nonceStr:a,package:c,signType:i,paySign:n},(function(e){console.log(e),"get_brand_wcpay_request:ok"==e.err_msg?(s.$toast("支付成功","middle"),setTimeout((function(){s.$router.push({name:"payDetail",query:{balance:s.balance,result:"1",shopName:s.detail.shopName,type:"1"}})}),500)):"get_brand_wcpay_request:cancel"==e.err_msg?s.$toast("支付取消","middle"):"get_brand_wcpay_request:fail"==e.err_msg&&s.$toast("支付失败，请稍后再试","middle")}))}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",r,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",r),document.attachEvent("onWeixinJSBridgeReady",r)):r()},loadData:function(){var e=this,t=this.$toast.loading({duration:0,forbidClick:!0});"1"==this.$route.query.type?Object(r["ib"])({shopCode:this.$route.query.shopCode}).then((function(a){t.clear(),0==a.code?(e.detail=a.data,e.acAmt=a.data.myAccount[0].acAmt):e.$toast(a.msg)})):(Object(r["bc"])().then((function(a){t.clear(),0==a.code?e.acAmt=a.data.find((function(e){return"1202763465547927552"==e.ptCode})).acAmt:e.$toast.fail(a.msg)})),Object(r["ac"])({userCode:this.$route.query.userCode}).then((function(a){t.clear(),0==a.code?e.detail=a.data:e.$toast(a.msg)})))}},mounted:function(){document.title="付款",this.loadData()}},d=o,u=(a("4de5"),a("2877")),l=Object(u["a"])(d,c,i,!1,null,"629b9d39",null);t["default"]=l.exports},"4de5":function(e,t,a){"use strict";var c=a("c621"),i=a.n(c);i.a},7514:function(e,t,a){"use strict";var c=a("5ca1"),i=a("0a49")(5),n="find",s=!0;n in[]&&Array(1)[n]((function(){s=!1})),c(c.P+c.F*s,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(n)},c621:function(e,t,a){},cd1c:function(e,t,a){var c=a("e853");e.exports=function(e,t){return new(c(e))(t)}},e853:function(e,t,a){var c=a("d3f4"),i=a("1169"),n=a("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),c(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}}}]);
//# sourceMappingURL=chunk-3b530ce6.8d629e45.js.map