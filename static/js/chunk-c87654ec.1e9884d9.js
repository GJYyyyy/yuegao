(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c87654ec"],{"661d":function(t,e,o){},a540:function(t,e,o){"use strict";var i=o("661d"),a=o.n(i);a.a},f85e:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{height:"100%"}},[o("div",{staticClass:"flex-between",staticStyle:{height:"100%"}},[o("div",{staticStyle:{"overflow-y":"auto","background-color":"#f7f8fa"}},[o("van-sidebar",{on:{change:t._choose_goods_category_two},model:{value:t.goodsCategoryTwoIndex,callback:function(e){t.goodsCategoryTwoIndex=e},expression:"goodsCategoryTwoIndex"}},t._l(t.goodsCategoryTwoList,(function(t,e){return o("van-sidebar-item",{key:e,attrs:{title:t.cateName}})})),1)],1),o("div",{staticStyle:{width:"calc(100% - 80px)","background-color":"#f9f9f9",position:"relative"}},[t.loadingVisible?o("van-loading",{staticClass:"flex-center",staticStyle:{position:"absolute","z-index":"2",left:"50%",top:"50%",transform:"translate(-50%,-50%)",width:"100%",height:"100%","background-color":"rgba(255,255,255,.5)"},attrs:{vertical:""}},[t._v("加载中...")]):t._e(),o("div",{ref:"goodsList",staticClass:"list",staticStyle:{position:"ralative","z-index":"1",height:"100%","overflow-y":"auto"},on:{scroll:t._on_goods_list_scroll_to_bottom}},t._l(t.goodsList,(function(e,i){return o("div",{key:i,staticClass:"item",on:{click:function(o){return t._go_detail(e)}}},[o("div",{staticClass:"topImage"},[o("img",{attrs:{src:t.$utils.dealImg(e.gimg),alt:""},on:{load:t._on_img_loaded}})]),o("div",{staticClass:"bottomText"},[o("p",{staticClass:"title"},[t._v(t._s(e.gname))]),o("div",{staticClass:"labels"},[e.gfanj?o("div",{staticClass:"label"},[t._v("送"+t._s(e.gfanj)+"积分")]):t._e()]),o("div",{staticClass:"bottom"},[o("div",{staticClass:"left"},[o("div",{staticClass:"price1"},[o("span",{staticClass:"label"},[t._v("优惠价")]),o("span",{staticClass:"font"},[t._v("¥")]),o("span",{staticClass:"num"},[t._v(t._s(e.goutPrice?e.goutPrice.toFixed(2):"0.00"))])]),o("div",{staticClass:"price"},[o("span",{staticClass:"label"},[t._v("市场价")]),o("span",{staticClass:"font"},[t._v("¥")]),o("span",{staticClass:"num"},[o("del",[t._v(t._s(e.gmarketPrice?e.gmarketPrice.toFixed(2):"0.00"))])])])])])])])})),0)],1)])])},a=[],s=(o("96cf"),o("1da1")),n=o("365c"),l={data:function(){return{goodsCategoryTwoIndex:0,goodsCategoryTwoList:[],goodsList:[],keyWord:"",pageNum:1,pageSize:10,waitLoadMaxTime:3e4,waitloadTimer:null,loadingVisible:!1,loadedImgNumber:0}},computed:{currCateCode:function(){return this.goodsCategoryTwoList[this.goodsCategoryTwoIndex].cateCode}},mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return document.title="商品分类",t.next=3,this.getGoodsCategoryTwoList();case 3:this.getGoodsList().then((function(t){e.goodsList=t.data.list}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),destroyed:function(){clearTimeout(this.waitloadTimer)},methods:{getGoodsCategoryTwoList:function(){var t=this;return new Promise((function(e,o){Object(n["zb"])({cateCode:"825678A88DCD43528E3268E2F65A045D",cateLevel:2}).then((function(i){0===i.code?(t.goodsCategoryTwoList=i.data,e(i)):(t.$toast.fail(i.msg),o(i))})).catch(o)}))},getGoodsList:function(){var t=this;return new Promise((function(e,o){var i={cateCode:t.currCateCode,viewName:t.keyWord,pageNum:t.pageNum,pageSize:t.pageSize};t.loadingVisible=!0,Object(n["yb"])(i).then((function(i){0===i.code?(t.waitloadTimer=setTimeout((function(){t.loadingVisible=!1,t.loadedImgNumber=0,clearTimeout(t.waitloadTimer)}),t.waitLoadMaxTime),e(i)):(t.$toast.fail(i.msg),t.loadingVisible=!1,t.loadedImgNumber=0,clearTimeout(t.waitloadTimer),o(i))})).catch(o)}))},_choose_goods_category_two:function(){var t=this;this.pageNum=1,this.$refs.goodsList.scrollTop=0,this.getGoodsList().then((function(e){t.goodsList=e.data.list}))},_on_goods_list_scroll_to_bottom:function(t){var e=this;t.target.scrollHeight-t.target.clientHeight-t.target.scrollTop===0&&(this.pageNum++,this.getGoodsList().then((function(t){t.data.list.length>0?e.goodsList=e.goodsList.concat(t.data.list):e.pageNum--})))},_on_img_loaded:function(){this.loadedImgNumber++,this.loadedImgNumber!==this.pageSize&&this.loadedImgNumber!==this.goodsList.length%this.pageSize||(this.loadingVisible=!1,this.loadedImgNumber=0,clearTimeout(this.waitloadTimer))},_go_detail:function(t){this.$router.push({name:"goodsDetail",query:{id:t.gcode,title:t.gname}})}}},r=l,c=(o("a540"),o("2877")),d=Object(c["a"])(r,i,a,!1,null,"6e0ac37a",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-c87654ec.1e9884d9.js.map