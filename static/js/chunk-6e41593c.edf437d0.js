(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e41593c"],{"1b10":function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return a}));var n=44,a={title:String,loading:Boolean,readonly:Boolean,itemHeight:[Number,String],showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,allowHtml:{type:Boolean,default:!0},visibleItemCount:{type:[Number,String],default:6},swipeDuration:{type:[Number,String],default:1e3}}},"29aa":function(t,e,i){t.exports=i.p+"static/img/edit.6f718fb8.png"},3572:function(t,e,i){},"5f5f":function(t,e,i){"use strict";i("68ef"),i("e3b3"),i("a526")},"8a58":function(t,e,i){"use strict";i("68ef"),i("a71a"),i("9d70"),i("3743"),i("4d75")},"92e6":function(t,e){t.exports="data:image/png;base64,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"},"953a":function(t,e,i){"use strict";i.r(e);var n,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"addGood mescroll"},[n("div",{staticClass:"mid"},[n("div",{staticClass:"headPic"},[n("img",{staticClass:"pic",attrs:{src:t.detail.gimg?t.$utils.dealImg(t.detail.gimg):i("164d"),alt:""}}),n("img",{staticClass:"icon",attrs:{src:i("29aa"),alt:""},on:{click:function(e){return t.upload("1")}}}),n("input",{ref:"upload1",staticClass:"file",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.chooseUpload}})]),n("van-cell-group",[n("van-field",{attrs:{"input-align":"right",clearable:"",type:"textarea",row:"2",label:"商品名称",placeholder:"请输入商品名称"},on:{blur:function(e){return t.blur()}},model:{value:t.detail.gname,callback:function(e){t.$set(t.detail,"gname",e)},expression:"detail.gname"}}),n("van-field",{attrs:{"input-align":"right",clearable:"",label:"品牌",placeholder:" 请输入商品品牌"},on:{blur:function(e){return t.blur()}},model:{value:t.detail.brandName,callback:function(e){t.$set(t.detail,"brandName",e)},expression:"detail.brandName"}}),n("van-field",{attrs:{"input-align":"right",clearable:"",label:"规格",placeholder:"请输入商品规格"},on:{blur:function(e){return t.blur()}},model:{value:t.detail.guigeName,callback:function(e){t.$set(t.detail,"guigeName",e)},expression:"detail.guigeName"}}),n("van-field",{attrs:{"input-align":"right",clearable:"",type:"number",label:"市场价",placeholder:"请输入市场价"},on:{blur:function(e){return t.blur()}},model:{value:t.detail.gmarketPrice,callback:function(e){t.$set(t.detail,"gmarketPrice",e)},expression:"detail.gmarketPrice"}}),n("van-field",{attrs:{"input-align":"right",clearable:"",type:"number",label:"销售价",placeholder:"请输入当前销售价"},on:{blur:function(e){return t.blur()}},model:{value:t.detail.goutPrice,callback:function(e){t.$set(t.detail,"goutPrice",e)},expression:"detail.goutPrice"}}),n("van-field",{attrs:{"input-align":"right",clearable:"",type:"digit",label:"库存",placeholder:"请输入可销售的库存"},on:{blur:function(e){return t.blur()}},model:{value:t.detail.gcounts,callback:function(e){t.$set(t.detail,"gcounts",e)},expression:"detail.gcounts"}}),n("van-field",{attrs:{"input-align":"right",clearable:"",type:"digit",label:"排序",placeholder:"默认99"},on:{blur:function(e){return t.blur()}},model:{value:t.detail.gsort,callback:function(e){t.$set(t.detail,"gsort",e)},expression:"detail.gsort"}}),n("van-field",{attrs:{autosize:"",rows:2,"input-align":"right",label:"简介",placeholder:"请输入是商品的简单介绍",type:"textarea",clearable:"",maxlength:"50","show-word-limit":""},on:{blur:function(e){return t.blur()}},model:{value:t.detail.gdes,callback:function(e){t.$set(t.detail,"gdes",e)},expression:"detail.gdes"}}),n("van-cell",{attrs:{title:"商品分类","is-link":"",value:t.detail.cateName||"请选择商品分类"},on:{click:function(e){t.cateShow=!0}}}),n("van-cell",{attrs:{title:"单位","is-link":"",value:t.detail.unitName||"请输入商品计量单位"},on:{click:function(e){t.unitShow=!0}}}),n("div",[n("van-cell",{on:{click:function(e){return t.upload("2")}}},[n("template",{slot:"title"},[n("span",{staticClass:"custom-text"},[t._v("详细介绍")])]),n("div",{staticClass:"content"},[n("p",[t._v("点击上传商品介绍图片")]),n("img",{staticClass:"icon",attrs:{src:i("92e6"),alt:""}}),n("input",{ref:"upload2",staticClass:"file",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.chooseUpload}})])],2),t.picList.length?n("div",{staticClass:"filesList"},t._l(t.picList,(function(e,i){return n("div",{key:i,staticClass:"filesItem"},[n("img",{attrs:{src:t.$utils.dealImg(e),alt:""}}),n("span",{staticClass:"del",on:{click:function(e){return t.delImg(i)}}},[t._v("×")])])})),0):t._e()],1)],1),n("div",{staticClass:"submit-wrap"},[n("div",{staticClass:"submit",on:{click:function(e){return t.submit()}}},[t._v("提交")])])],1),n("van-popup",{attrs:{position:"bottom"},model:{value:t.cateShow,callback:function(e){t.cateShow=e},expression:"cateShow"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:t.cateList,"value-key":"cateName"},on:{cancel:function(e){t.cateShow=!1},confirm:t.cateConfirm}})],1),n("van-popup",{attrs:{position:"bottom"},model:{value:t.unitShow,callback:function(e){t.unitShow=e},expression:"unitShow"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:t.unitList,"value-key":"dictLabel"},on:{cancel:function(e){t.unitShow=!1},confirm:t.unitConfirm}})],1)],1)},s=[],o=(i("34ef"),i("4917"),i("28a5"),i("53ca")),l=i("ade3"),r=(i("5f5f"),i("f253")),c=(i("8a58"),i("e41f")),u=(i("be7f"),i("565f")),d=(i("c194"),i("7744")),h=(i("7f7f"),i("0653"),i("34e9")),f=i("365c"),m=(i("42df"),{components:(n={},Object(l["a"])(n,h["a"].name,h["a"]),Object(l["a"])(n,d["a"].name,d["a"]),Object(l["a"])(n,u["a"].name,u["a"]),Object(l["a"])(n,c["a"].name,c["a"]),Object(l["a"])(n,r["a"].name,r["a"]),n),data:function(){return Object(l["a"])({type:"",detail:{gdes:""},cateShow:!1,cateList:[],unitShow:!1,unitList:[],picList:[]},"type","")},methods:{blur:function(){document.body.scrollTop=0},cateConfirm:function(t,e){this.detail.cateName=t.cateName,this.detail.cateCode=t.cateCode,this.cateShow=!1},unitConfirm:function(t,e){this.detail.unitName=t.dictLabel,this.detail.unitCode=t.dictCode,this.unitShow=!1},delImg:function(t){this.picList.splice(t,1)},upload:function(t){this.type=t,2==this.type&&this.picList.length>8?this.$toast("最多只能上传9张图片"):this.$refs["upload"+this.type].click()},chooseUpload:function(t){var e=this,i=this,n=(new FormData,t.target.files),a=new FileReader;if(!(n.length<1)){this.loading=this.$toast.loading({duration:0,forbidClick:!0,message:"加载中..."});for(var s=function(t){console.log(n[t]);var s=n[t].size/1024/1024;if(s>100)return e.$toast.fail("文件大于100M"),{v:void 0};a.readAsDataURL(n[t]),a.onload=function(){var e=this.result,a=new Image;a.src=e,a.onload=function(){i.compressEvent(a,s,(function(e){i.uploadImg(e,n[t],t,n.length)}))}}},l=0;l<n.length;l++){var r=s(l);if("object"===Object(o["a"])(r))return r.v}}},compressEvent:function(t,e,i){var n=document.createElement("canvas"),a=n.getContext("2d"),s=(t.src.length,t.width),o=t.height;n.width=s,n.height=o,a.drawImage(t,0,0,s,o);var l=n.toDataURL("image/jpeg",e>1?.1:1);i&&i(l)},getPixelRatio:function(t){var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},dataURItoBlob:function(t){var e=t.split(","),i=e[0].match(/:(.*?);/)[1],n=atob(e[1]),a=n.length,s=new Uint8Array(a);while(a--)s[a]=n.charCodeAt(a);return new Blob([s],{type:i})},uploadImg:function(t,e,i,n){var a=this,s=this.dataURItoBlob(t),o=new FormData,l={headers:{"Content-Type":"multipart/form-data"}};o.append("file",s,e.name),o.append("path",1),this.$axios.post(this.$config.host+"/api/common/upload/file",o,l).then((function(t){i+1==n&&a.loading.clear(),0==t.code?"1"==a.type?a.detail.gimg=t.data.filename:a.picList.push(t.data.filename):a.$toast.fail("图片上传失败！")})).catch((function(t){a.$toast.clear(),console.log(t),a.$toast.fail("网络错误")}))},submit:function(){var t=this;if(this.detail.gname)if(this.detail.gmarketPrice)if(this.detail.goutPrice)if(this.detail.gcounts)if(this.detail.gsort)if(this.detail.gimg)if(this.detail.unitCode)if(this.detail.cateCode){var e=this.$toast.loading({duration:0,forbidClick:!0});Object(f["F"])({gcode:this.detail.gcode||void 0,gname:this.detail.gname,brandName:this.detail.brandName,guigeName:this.detail.guigeName,gmarketPrice:this.detail.gmarketPrice,goutPrice:this.detail.goutPrice,gcounts:this.detail.gcounts,gsort:this.detail.gsort,gimg:this.detail.gimg,gdes:this.detail.gdes,unitCode:this.detail.unitCode,cateCode:this.detail.cateCode,gmsg:this.picList.join(",")}).then((function(i){e.clear(),0==i.code?(t.$toast("1"==t.$route.query.type?"新增成功":"修改成功"),setTimeout((function(){t.$router.back()}))):t.$toast(i.msg)}))}else this.$toast("请选择分类");else this.$toast("请选择单位");else this.$toast("请输入首图");else this.$toast("请输入排序");else this.$toast("请输入库存");else this.$toast("请输入销售价");else this.$toast("请输入市场价");else this.$toast("请输入商品名称")},loadData:function(){var t=this,e=this.$toast.loading({duration:0,forbidClick:!0});Object(f["Zb"])().then((function(i){e.clear(),0==i.code?t.cateList=i.data:t.$toast(i.msg)})),Object(f["gc"])().then((function(i){e.clear(),0==i.code?t.unitList=i.data:t.$toast(i.msg)}))}},mounted:function(){this.loadData(),"2"==this.$route.query.type?this.detail=JSON.parse(sessionStorage.getItem("goodDetail")):this.detail={gname:"",brandName:"",guigeName:"",gmarketPrice:"",goutPrice:"",gcounts:"",gsort:"",gimg:"",gdes:"",unitCode:"",cateCode:""}}}),g=m,p=(i("ed03"),i("e9d3"),i("2877")),b=Object(p["a"])(g,a,s,!1,null,"7b0f9683",null);e["default"]=b.exports},a526:function(t,e,i){},c630:function(t,e,i){},e41f:function(t,e,i){"use strict";var n=i("d282"),a=i("a142"),s=i("6605"),o=i("ad06"),l=Object(n["a"])("popup"),r=l[0],c=l[1];e["a"]=r({mixins:[Object(s["a"])()],props:{round:Boolean,duration:[Number,String],closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var t=this,e=function(e){return function(i){return t.$emit(e,i)}};this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},render:function(){var t,e=arguments[0];if(this.shouldRender){var i=this.round,n=this.position,s=this.duration,l="center"===n,r=this.transition||(l?"van-fade":"van-popup-slide-"+n),u={};if(Object(a["c"])(s)){var d=l?"animationDuration":"transitionDuration";u[d]=s+"s"}return e("transition",{attrs:{appear:this.transitionAppear,name:r},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],style:u,class:c((t={round:i},t[n]=n,t["safe-area-inset-bottom"]=this.safeAreaInsetBottom,t)),on:{click:this.onClick}},[this.slots(),this.closeable&&e(o["a"],{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:c("close-icon",this.closeIconPosition),on:{click:this.close}})])])}}})},e9d3:function(t,e,i){"use strict";var n=i("3572"),a=i.n(n);a.a},ed03:function(t,e,i){"use strict";var n=i("c630"),a=i.n(n);a.a},f253:function(t,e,i){"use strict";var n=i("c31d"),a=i("d282"),s=i("1325"),o=i("b1d2"),l=i("1b10"),r=i("ea8e"),c=i("543e"),u=i("2638"),d=i.n(u),h=i("1128");function f(t){return Array.isArray(t)?t.map((function(t){return f(t)})):"object"===typeof t?Object(h["a"])({},t):t}var m=i("a142"),g=i("482d"),p=i("3875"),b=200,v=300,x=15,C=Object(a["a"])("picker-column"),y=C[0],I=C[1];function k(t){var e=window.getComputedStyle(t),i=e.transform||e.webkitTransform,n=i.slice(7,i.length-1).split(", ")[5];return Number(n)}function w(t){return Object(m["e"])(t)&&t.disabled}var S=y({mixins:[p["a"]],props:{valueKey:String,readonly:Boolean,allowHtml:Boolean,className:String,itemHeight:Number,defaultIndex:Number,swipeDuration:[Number,String],visibleItemCount:[Number,String],initialOptions:{type:Array,default:function(){return[]}}},data:function(){return{offset:0,duration:0,options:f(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},mounted:function(){this.bindTouchEvent(this.$el)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1)},watch:{initialOptions:"setOptions",defaultIndex:function(t){this.setIndex(t)}},computed:{count:function(){return this.options.length},baseOffset:function(){return this.itemHeight*(this.visibleItemCount-1)/2}},methods:{setOptions:function(t){JSON.stringify(t)!==JSON.stringify(this.options)&&(this.options=f(t),this.setIndex(this.defaultIndex))},onTouchStart:function(t){if(!this.readonly){if(this.touchStart(t),this.moving){var e=k(this.$refs.wrapper);this.offset=Math.min(0,e-this.baseOffset),this.startOffset=this.offset}else this.startOffset=this.offset;this.duration=0,this.transitionEndTrigger=null,this.touchStartTime=Date.now(),this.momentumOffset=this.startOffset}},onTouchMove:function(t){if(!this.readonly){this.touchMove(t),"vertical"===this.direction&&(this.moving=!0,Object(s["c"])(t,!0)),this.offset=Object(g["b"])(this.startOffset+this.deltaY,-this.count*this.itemHeight,this.itemHeight);var e=Date.now();e-this.touchStartTime>v&&(this.touchStartTime=e,this.momentumOffset=this.offset)}},onTouchEnd:function(){var t=this;if(!this.readonly){var e=this.offset-this.momentumOffset,i=Date.now()-this.touchStartTime,n=i<v&&Math.abs(e)>x;if(n)this.momentum(e,i);else{var a=this.getIndexByOffset(this.offset);this.duration=b,this.setIndex(a,!0),setTimeout((function(){t.moving=!1}),0)}}},onTransitionEnd:function(){this.stopMomentum()},onClickItem:function(t){this.moving||this.readonly||(this.transitionEndTrigger=null,this.duration=b,this.setIndex(t,!0))},adjustIndex:function(t){t=Object(g["b"])(t,0,this.count);for(var e=t;e<this.count;e++)if(!w(this.options[e]))return e;for(var i=t-1;i>=0;i--)if(!w(this.options[i]))return i},getOptionText:function(t){return Object(m["e"])(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,e){var i=this;t=this.adjustIndex(t)||0;var n=-t*this.itemHeight,a=function(){t!==i.currentIndex&&(i.currentIndex=t,e&&i.$emit("change",t))};this.moving&&n!==this.offset?this.transitionEndTrigger=a:a(),this.offset=n},setValue:function(t){for(var e=this.options,i=0;i<e.length;i++)if(this.getOptionText(e[i])===t)return this.setIndex(i)},getValue:function(){return this.options[this.currentIndex]},getIndexByOffset:function(t){return Object(g["b"])(Math.round(-t/this.itemHeight),0,this.count-1)},momentum:function(t,e){var i=Math.abs(t/e);t=this.offset+i/.003*(t<0?-1:1);var n=this.getIndexByOffset(t);this.duration=+this.swipeDuration,this.setIndex(n,!0)},stopMomentum:function(){this.moving=!1,this.duration=0,this.transitionEndTrigger&&(this.transitionEndTrigger(),this.transitionEndTrigger=null)},genOptions:function(){var t=this,e=this.$createElement,i={height:this.itemHeight+"px"};return this.options.map((function(n,a){var s,o=t.getOptionText(n),l=w(n),r={style:i,attrs:{role:"button",tabindex:l?-1:0},class:[I("item",{disabled:l,selected:a===t.currentIndex})],on:{click:function(){t.onClickItem(a)}}},c={class:"van-ellipsis",domProps:(s={},s[t.allowHtml?"innerHTML":"textContent"]=o,s)};return e("li",d()([{},r]),[t.slots("option",n)||e("div",d()([{},c]))])}))}},render:function(){var t=arguments[0],e={transform:"translate3d(0, "+(this.offset+this.baseOffset)+"px, 0)",transitionDuration:this.duration+"ms",transitionProperty:this.duration?"all":"none"};return t("div",{class:[I(),this.className]},[t("ul",{ref:"wrapper",style:e,class:I("wrapper"),on:{transitionend:this.onTransitionEnd}},[this.genOptions()])])}}),O=Object(a["a"])("picker"),A=O[0],N=O[1],B=O[2];e["a"]=A({props:Object(n["a"])({},l["b"],{defaultIndex:{type:[Number,String],default:0},columns:{type:Array,default:function(){return[]}},toolbarPosition:{type:String,default:"top"},valueKey:{type:String,default:"text"}}),data:function(){return{children:[],formattedColumns:[]}},computed:{itemPxHeight:function(){return this.itemHeight?Object(r["b"])(this.itemHeight):l["a"]},dataType:function(){var t=this.columns,e=t[0]||{};return e.children?"cascade":e.values?"object":"text"}},watch:{columns:{handler:"format",immediate:!0}},methods:{format:function(){var t=this.columns,e=this.dataType;"text"===e?this.formattedColumns=[{values:t}]:"cascade"===e?this.formatCascade():this.formattedColumns=t},formatCascade:function(){var t=[],e={children:this.columns};while(e&&e.children){var i,n=e,a=n.children,s=null!=(i=e.defaultIndex)?i:+this.defaultIndex;while(a[s]&&a[s].disabled){if(!(s<a.length-1)){s=0;break}s++}t.push({values:e.children,className:e.className,defaultIndex:s}),e=a[s]}this.formattedColumns=t},emit:function(t){var e=this;if("text"===this.dataType)this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0));else{var i=this.getValues();"cascade"===this.dataType&&(i=i.map((function(t){return t[e.valueKey]}))),this.$emit(t,i,this.getIndexes())}},onCascadeChange:function(t){for(var e={children:this.columns},i=this.getIndexes(),n=0;n<=t;n++)e=e.children[i[n]];while(e&&e.children)t++,this.setColumnValues(t,e.children),e=e.children[e.defaultIndex||0]},onChange:function(t){var e=this;if("cascade"===this.dataType&&this.onCascadeChange(t),"text"===this.dataType)this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0));else{var i=this.getValues();"cascade"===this.dataType&&(i=i.map((function(t){return t[e.valueKey]}))),this.$emit("change",this,i,t)}},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var e=this.getColumn(t);return e&&e.getValue()},setColumnValue:function(t,e){var i=this.getColumn(t);i&&(i.setValue(e),"cascade"===this.dataType&&this.onCascadeChange(t))},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var i=this.getColumn(t);i&&(i.setIndex(e),"cascade"===this.dataType&&this.onCascadeChange(t))},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){var i=this.children[t];i&&i.setOptions(e)},getValues:function(){return this.children.map((function(t){return t.getValue()}))},setValues:function(t){var e=this;t.forEach((function(t,i){e.setColumnValue(i,t)}))},getIndexes:function(){return this.children.map((function(t){return t.currentIndex}))},setIndexes:function(t){var e=this;t.forEach((function(t,i){e.setColumnIndex(i,t)}))},confirm:function(){this.children.forEach((function(t){return t.stopMomentum()})),this.emit("confirm")},cancel:function(){this.emit("cancel")},genTitle:function(){var t=this.$createElement,e=this.slots("title");return e||(this.title?t("div",{class:["van-ellipsis",N("title")]},[this.title]):void 0)},genCancel:function(){var t=this.$createElement;return t("button",{attrs:{type:"button"},class:N("cancel"),on:{click:this.cancel}},[this.slots("cancel")||this.cancelButtonText||B("cancel")])},genConfirm:function(){var t=this.$createElement;return t("button",{attrs:{type:"button"},class:N("confirm"),on:{click:this.confirm}},[this.slots("confirm")||this.confirmButtonText||B("confirm")])},genToolbar:function(){var t=this.$createElement;if(this.showToolbar)return t("div",{class:N("toolbar")},[this.slots()||[this.genCancel(),this.genTitle(),this.genConfirm()]])},genColumns:function(){var t=this.$createElement,e=this.itemPxHeight,i=e*this.visibleItemCount,n={height:e+"px"},a={height:i+"px"},l={backgroundSize:"100% "+(i-e)/2+"px"};return t("div",{class:N("columns"),style:a,on:{touchmove:s["c"]}},[this.genColumnItems(),t("div",{class:N("mask"),style:l}),t("div",{class:[o["f"],N("frame")],style:n})])},genColumnItems:function(){var t=this,e=this.$createElement;return this.formattedColumns.map((function(i,n){var a;return e(S,{attrs:{readonly:t.readonly,valueKey:t.valueKey,allowHtml:t.allowHtml,className:i.className,itemHeight:t.itemPxHeight,defaultIndex:null!=(a=i.defaultIndex)?a:+t.defaultIndex,swipeDuration:t.swipeDuration,visibleItemCount:t.visibleItemCount,initialOptions:i.values},scopedSlots:{option:t.$scopedSlots.option},on:{change:function(){t.onChange(n)}}})}))}},render:function(t){return t("div",{class:N()},["top"===this.toolbarPosition?this.genToolbar():t(),this.loading?t(c["a"],{class:N("loading")}):t(),this.slots("columns-top"),this.genColumns(),this.slots("columns-bottom"),"bottom"===this.toolbarPosition?this.genToolbar():t()])}})}}]);
//# sourceMappingURL=chunk-6e41593c.edf437d0.js.map